<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Quiz Kreativitas Siswa</title>
  <style>
    /* ---------- Basic UI ---------- */
    * { box-sizing: border-box; margin:0; padding:0; font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }
    :root {
      --bg1: #ffe4f1;
      --accent1: #fb7185;
      --accent2: #fecdd3;
      --muted: #6b7280;
      --card: rgba(255,255,255,0.94);
    }
    body {
      min-height:100vh;
      background: radial-gradient(circle at top, #fec6e9 0, #ffffff 38%, #fff7fb 100%);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      color:#0f172a;
    }
    .app { width:100%; max-width:1100px; }

    .header {
      text-align:center;
      margin-bottom:18px;
    }
    .title { font-size:28px; font-weight:800; letter-spacing:0.02em; }
    .subtitle { font-size:13px; color:var(--muted); margin-top:4px; }

    .card {
      background: var(--card);
      backdrop-filter: blur(14px);
      border-radius:18px;
      padding:20px;
      box-shadow: 0 18px 40px rgba(244,114,182,0.14), 0 0 0 1px rgba(148,163,184,0.08);
      width:100%;
    }

    .flex { display:flex; gap:12px; align-items:center; }
    .flex-between { display:flex; justify-content:space-between; align-items:center; gap:12px; }
    .grid { display:grid; gap:12px; }
    .grid-2 { grid-template-columns: 1fr; }
    @media(min-width:720px) { .grid-2 { grid-template-columns: repeat(2, minmax(0,1fr)); } }

    label { display:block; font-size:12px; font-weight:600; color:#374151; margin-bottom:6px; }
    select, input[type="text"], textarea {
      width:100%; padding:10px 12px; border-radius:10px; border:1px solid #e6e7eb; background:#fafafa; font-size:14px;
      outline:none;
    }
    select:focus, input[type="text"]:focus, textarea:focus { border-color:var(--accent1); box-shadow:0 6px 18px rgba(251,113,133,0.12); }

    .btn {
      border:none; border-radius:999px; padding:10px 14px; font-weight:600; cursor:pointer; font-size:14px;
      display:inline-flex; gap:8px; align-items:center; justify-content:center;
    }
    .btn-main { background:linear-gradient(90deg,var(--accent1),var(--accent2)); color:#071233; box-shadow:0 8px 30px rgba(251,113,133,0.18); }
    .btn-outline { background:#fff; border:1px solid #e6e7eb; color:#071233; }
    .btn-danger { background: #fff1f2; border:1px solid #fb7185; color:#b91c1c; }

    .chip { display:inline-flex; gap:8px; align-items:center; padding:6px 10px; border-radius:999px; background:rgba(255,245,249,0.8); color:#be185d; font-weight:700; font-size:13px; }

    .home-row { margin-top:10px; display:flex; gap:12px; flex-wrap:wrap; }

    /* quiz */
    .quiz-meta { font-size:13px; color:var(--muted); }
    .quiz-score { font-size:18px; font-weight:800; }
    .question { font-size:18px; font-weight:700; margin:12px 0; }
    .options { display:grid; gap:10px; margin-bottom:8px; }
    .option { padding:12px 14px; border-radius:12px; background:#fff; border:1px solid #e6e7eb; cursor:pointer; text-align:left; font-size:14px; transition:all .12s; }
    .option:hover { transform:translateY(-4px); box-shadow:0 10px 30px rgba(17,24,39,0.06); }
    .option.disabled { opacity:0.85; cursor:default; transform:none; box-shadow:none; }
    .option.correct { border-color:#22c55e; background:#f0fdf4; }
    .option.wrong { border-color:#fb7185; background:#fff1f2; }

    .explain { margin-top:10px; padding:10px 12px; border-radius:12px; background:#f8fafc; border:1px solid #e6e7eb; }
    .explain strong { display:block; margin-bottom:6px; }

    .progress-track { height:8px; background:#f3f4f6; border-radius:999px; overflow:hidden; margin:10px 0 14px; }
    .progress-fill { height:100%; width:0%; background:linear-gradient(90deg,var(--accent1),#f97316); transition:width .2s ease; }

    /* admin */
    .admin-panel { margin-top:12px; border-top:1px dashed #e6e7eb; padding-top:12px; font-size:13px; color:#374151; }
    .admin-row { display:grid; gap:10px; }
    @media(min-width:720px) { .admin-row { grid-template-columns:repeat(2,1fr); } }

    .small { font-size:12px; color:var(--muted); }

    footer.note { margin-top:12px; font-size:12px; color:var(--muted); text-align:center; }
  </style>
</head>
<body>
  <div class="app">
    <div class="header">
      <div class="title">Quiz Kreativitas</div>
      <div class="subtitle">Interaktif • Multi-level (Mudah / Lumayan Susah / Susah Banget) • Mode Guru & Siswa</div>
    </div>

    <!-- HOME CARD -->
    <section id="home" class="card">
      <div class="flex-between">
        <div>
          <div style="font-weight:800; font-size:18px;">Selamat datang</div>
          <div class="small">Pilih mata pelajaran dan level untuk mulai kuis.</div>
        </div>

        <div class="flex" style="gap:10px;">
          <div id="mode-indicator" class="chip">Mode: Siswa</div>
          <button id="btn-login" class="btn btn-outline">Login Guru</button>
        </div>
      </div>

      <div class="grid grid-2" style="margin-top:12px;">
        <div>
          <label for="category">Mata Pelajaran</label>
          <select id="category"></select>
        </div>
        <div>
          <label for="level">Level</label>
          <select id="level"></select>
        </div>
      </div>

      <div class="home-row" style="margin-top:12px;">
        <button id="btn-start" class="btn btn-main">Mulai Quiz</button>
        <button id="btn-random" class="btn btn-outline">Acak & Mulai</button>
        <button id="btn-show-admin" class="btn btn-outline" style="display:none;">Admin & Impor</button>
      </div>

      <div class="small" style="margin-top:10px;">
        Jika siswa menjawab salah lalu pilih "Ulangi level ini", soal akan diacak ulang dan dimulai dari soal berbeda.
      </div>

      <!-- ADMIN PANEL (guru only) -->
      <div id="admin-panel" class="admin-panel" style="display:none;">
        <div style="font-weight:700; margin-bottom:8px;">Panel Guru — Buat soal / Impor CSV</div>
        <div class="small" style="margin-bottom:8px;">
          Tips: Format CSV: <code>pertanyaan, opsiA, opsiB, opsiC, opsiD, hurufBenar(a/b/c/d), penjelasan</code>. Baris pertama dianggap header.
        </div>

        <div class="admin-row">
          <div>
            <label for="admin-cat">Mata Pelajaran (baru / pilih yang ada)</label>
            <input id="admin-cat" type="text" placeholder="Misal: Bahasa Indonesia" />
          </div>
          <div>
            <label for="admin-level">Level</label>
            <input id="admin-level" type="text" placeholder="Mudah / Lumayan Susah / Susah Banget" />
          </div>
        </div>

        <div style="margin-top:10px;" class="admin-row">
          <div>
            <label for="q-text">Pertanyaan</label>
            <textarea id="q-text" placeholder="Tulis pertanyaan di sini..."></textarea>
          </div>
          <div>
            <label for="q-a">Opsi A</label>
            <input id="q-a" type="text" />
            <label for="q-b" style="margin-top:8px;">Opsi B</label>
            <input id="q-b" type="text" />
            <label for="q-c" style="margin-top:8px;">Opsi C</label>
            <input id="q-c" type="text" />
            <label for="q-d" style="margin-top:8px;">Opsi D</label>
            <input id="q-d" type="text" />
          </div>
        </div>

        <div style="margin-top:8px;" class="grid">
          <div style="display:flex; gap:8px; align-items:center;">
            <label style="min-width:120px;">Jawaban Benar (a/b/c/d)</label>
            <input id="q-ans" type="text" style="width:80px;" />
            <label style="min-width:120px; margin-left:16px;">Penjelasan (opsional)</label>
            <input id="q-exp" type="text" placeholder="Penjelasan singkat" />
          </div>

          <div style="display:flex; gap:8px;">
            <button id="btn-add-q" class="btn btn-main">Tambah Soal</button>
            <input id="csv-file" type="file" accept=".csv" />
            <button id="btn-import" class="btn btn-outline">Impor CSV (ganti level)</button>
            <button id="btn-logout" class="btn btn-danger" style="margin-left:auto;">Logout Guru</button>
          </div>
        </div>
      </div>
    </section>

    <!-- QUIZ CARD -->
    <section id="quiz" class="card" style="margin-top:16px; display:none;">
      <div class="flex-between">
        <div>
          <div class="quiz-meta" id="meta"></div>
          <div class="small" id="progressText"></div>
        </div>
        <div style="text-align:right;">
          <div class="quiz-score">Skor: <span id="score">0</span></div>
          <div class="small" id="totalQuestions"></div>
        </div>
      </div>

      <div class="progress-track"><div id="pfill" class="progress-fill"></div></div>

      <div class="question" id="questionText"></div>

      <div class="options" id="options"></div>

      <div class="explain" id="explain" style="display:none;">
        <strong id="explainTitle"></strong>
        <div id="explainText"></div>
        <div style="margin-top:10px; display:flex; gap:8px;">
          <button id="btn-next" class="btn btn-main">Soal berikutnya</button>
          <button id="btn-retry" class="btn btn-outline" style="display:none;">Ulangi level ini (acak soal)</button>
          <button id="btn-home" class="btn btn-outline">Kembali ke menu</button>
        </div>
      </div>
    </section>

    <!-- RESULT -->
    <section id="result" class="card" style="display:none; margin-top:16px; text-align:center;">
      <div style="font-weight:800; font-size:20px;">Hasil Quiz</div>
      <div style="margin-top:8px;" id="resultText"></div>
      <div style="margin-top:12px; display:flex; gap:8px; justify-content:center;">
        <button id="btn-res-retry" class="btn btn-main">Ulangi level ini (acak soal)</button>
        <button id="btn-res-home" class="btn btn-outline">Pilih level lain</button>
      </div>
    </section>

    <footer class="note">Jika mau, saya bisa bantu pisahkan file CSS/JS agar lebih rapi di repo.</footer>
  </div>

  <script>
    /***************************************************************************
     * Quiz Kreativitas - single-file JS
     * Mode: Siswa / Guru (client-side password = "guru123")
     * Levels: "Mudah", "Lumayan Susah", "Susah Banget"
     ***************************************************************************/

    // ---------- Level names ----------
    const LEVELS = ["Mudah", "Lumayan Susah", "Susah Banget"];

    // ---------- Initial question bank (Matematika kept; Bahasa Indonesia, IPA, Pemrograman added)
    // For brevity and clarity, each subject has 20 questions per level (Mudah / Lumayan Susah / Susah Banget)
    const QUESTION_BANK = {
      "Matematika": {
        "Mudah": [
          { id: "m-md-1", text: "2 + 3 = ?", options:[{id:"a",text:"5"},{id:"b",text:"6"},{id:"c",text:"3"},{id:"d",text:"4"}], answerId:"a", explanation:"2 + 3 = 5." },
          { id: "m-md-2", text: "5 + 7 = ?", options:[{id:"a",text:"11"},{id:"b",text:"13"},{id:"c",text:"12"},{id:"d",text:"10"}], answerId:"c", explanation:"5 + 7 = 12." },
          { id: "m-md-3", text: "9 - 4 = ?", options:[{id:"a",text:"5"},{id:"b",text:"3"},{id:"c",text:"6"},{id:"d",text:"4"}], answerId:"a", explanation:"9 - 4 = 5." },
          { id: "m-md-4", text: "12 - 5 = ?", options:[{id:"a",text:"8"},{id:"b",text:"6"},{id:"c",text:"7"},{id:"d",text:"5"}], answerId:"c", explanation:"12 - 5 = 7." },
          { id: "m-md-5", text: "3 × 4 = ?", options:[{id:"a",text:"10"},{id:"b",text:"11"},{id:"c",text:"12"},{id:"d",text:"9"}], answerId:"c", explanation:"3 × 4 = 12." },
          { id: "m-md-6", text: "6 × 7 = ?", options:[{id:"a",text:"42"},{id:"b",text:"36"},{id:"c",text:"40"},{id:"d",text:"48"}], answerId:"a", explanation:"6 × 7 = 42." },
          { id: "m-md-7", text: "8 ÷ 2 = ?", options:[{id:"a",text:"4"},{id:"b",text:"2"},{id:"c",text:"6"},{id:"d",text:"8"}], answerId:"a", explanation:"8 ÷ 2 = 4." },
          { id: "m-md-8", text: "15 ÷ 3 = ?", options:[{id:"a",text:"3"},{id:"b",text:"4"},{id:"c",text:"5"},{id:"d",text:"6"}], answerId:"c", explanation:"15 ÷ 3 = 5." },
          { id: "m-md-9", text: "4 + 6 - 2 = ?", options:[{id:"a",text:"6"},{id:"b",text:"7"},{id:"c",text:"9"},{id:"d",text:"8"}], answerId:"d", explanation:"4 + 6 - 2 = 8." },
          { id: "m-md-10", text: "(2 + 3) × 2 = ?", options:[{id:"a",text:"10"},{id:"b",text:"8"},{id:"c",text:"7"},{id:"d",text:"12"}], answerId:"a", explanation:"(2+3)×2=10." },
          { id: "m-md-11", text: "10 - (3 + 2) = ?", options:[{id:"a",text:"6"},{id:"b",text:"4"},{id:"c",text:"3"},{id:"d",text:"5"}], answerId:"d", explanation:"10 - (3+2) = 5." },
          { id: "m-md-12", text: "7 + 0 = ?", options:[{id:"a",text:"5"},{id:"b",text:"6"},{id:"c",text:"8"},{id:"d",text:"7"}], answerId:"d", explanation:"7 + 0 = 7." },
          { id: "m-md-13", text: "0 + 0 = ?", options:[{id:"a",text:"0"},{id:"b",text:"1"},{id:"c",text:"2"},{id:"d",text:"-0"}], answerId:"a", explanation:"0 + 0 = 0." },
          { id: "m-md-14", text: "5 × 5 = ?", options:[{id:"a",text:"20"},{id:"b",text:"25"},{id:"c",text:"15"},{id:"d",text:"30"}], answerId:"b", explanation:"5 × 5 = 25." },
          { id: "m-md-15", text: "18 ÷ 3 = ?", options:[{id:"a",text:"6"},{id:"b",text:"5"},{id:"c",text:"3"},{id:"d",text:"9"}], answerId:"a", explanation:"18 ÷ 3 = 6." },
          { id: "m-md-16", text: "14 - 7 = ?", options:[{id:"a",text:"6"},{id:"b",text:"7"},{id:"c",text:"8"},{id:"d",text:"5"}], answerId:"b", explanation:"14 - 7 = 7." },
          { id: "m-md-17", text: "11 + 9 = ?", options:[{id:"a",text:"19"},{id:"b",text:"21"},{id:"c",text:"18"},{id:"d",text:"20"}], answerId:"d", explanation:"11 + 9 = 20." },
          { id: "m-md-18", text: "2 × 6 + 1 = ?", options:[{id:"a",text:"12"},{id:"b",text:"13"},{id:"c",text:"11"},{id:"d",text:"10"}], answerId:"b", explanation:"2×6+1=13." },
          { id: "m-md-19", text: "20 - 4 ÷ 2 = ? (urut operasi)", options:[{id:"a",text:"19"},{id:"b",text:"18"},{id:"c",text:"16"},{id:"d",text:"17"}], answerId:"b", explanation:"4÷2=2 → 20-2=18." },
          { id: "m-md-20", text: "3 + 4 × 2 = ? (urut operasi)", options:[{id:"a",text:"14"},{id:"b",text:"10"},{id:"c",text:"11"},{id:"d",text:"9"}], answerId:"c", explanation:"4×2=8 → 3+8=11." }
        ],
        "Lumayan Susah": [
          // 20 menengah questions (cleaned up & correct)
          { id: "m-ls-1", text: "Jika x = 3, 2x² − 1 = ?", options:[{id:"a",text:"17"},{id:"b",text:"16"},{id:"c",text:"18"},{id:"d",text:"15"}], answerId:"a", explanation:"2*(3^2)-1 = 2*9-1 = 18-1 = 17." },
          { id: "m-ls-2", text: "Jika x = 4, 3x + 5 = ?", options:[{id:"a",text:"16"},{id:"b",text:"17"},{id:"c",text:"18"},{id:"d",text:"19"}], answerId:"b", explanation:"3*4+5=12+5=17." },
          { id: "m-ls-3", text: "Jika x = 5, 7x − 2 = ?", options:[{id:"a",text:"35"},{id:"b",text:"33"},{id:"c",text:"32"},{id:"d",text:"30"}], answerId:"b", explanation:"7*5-2=35-2=33." },
          { id: "m-ls-4", text: "(5 + 3) × 4 = ?", options:[{id:"a",text:"20"},{id:"b",text:"24"},{id:"c",text:"32"},{id:"d",text:"28"}], answerId:"c", explanation:"(5+3)*4=8*4=32." },
          { id: "m-ls-5", text: "18 − 2 × 5 = ?", options:[{id:"a",text:"8"},{id:"b",text:"16"},{id:"c",text:"13"},{id:"d",text:"20"}], answerId:"a", explanation:"2*5=10 → 18-10=8." },
          { id: "m-ls-6", text: "24 ÷ 3 + 2 = ?", options:[{id:"a",text:"8"},{id:"b",text:"10"},{id:"c",text:"6"},{id:"d",text:"12"}], answerId:"b", explanation:"24÷3=8 → 8+2=10." },
          { id: "m-ls-7", text: "3/4 dari 20 = ?", options:[{id:"a",text:"10"},{id:"b",text:"12"},{id:"c",text:"15"},{id:"d",text:"18"}], answerId:"c", explanation:"3/4*20=15." },
          { id: "m-ls-8", text: "2/5 dari 30 = ?", options:[{id:"a",text:"10"},{id:"b",text:"12"},{id:"c",text:"14"},{id:"d",text:"8"}], answerId:"b", explanation:"2/5*30=12." },
          { id: "m-ls-9", text: "3/5 dari 30 = ?", options:[{id:"a",text:"15"},{id:"b",text:"18"},{id:"c",text:"20"},{id:"d",text:"25"}], answerId:"b", explanation:"3/5*30=18." },
          { id: "m-ls-10", text: "Keliling persegi sisi 9 cm = ?", options:[{id:"a",text:"18 cm"},{id:"b",text:"27 cm"},{id:"c",text:"36 cm"},{id:"d",text:"45 cm"}], answerId:"c", explanation:"4*9=36." },
          { id: "m-ls-11", text: "Keliling persegi panjang p=8 l=5 = ?", options:[{id:"a",text:"26 cm"},{id:"b",text:"40 cm"},{id:"c",text:"30 cm"},{id:"d",text:"16 cm"}], answerId:"a", explanation:"2*(8+5)=26." },
          { id: "m-ls-12", text: "Rata-rata 6,8,10,12 = ?", options:[{id:"a",text:"8"},{id:"b",text:"9"},{id:"c",text:"10"},{id:"d",text:"11"}], answerId:"b", explanation:"(6+8+10+12)/4=36/4=9." },
          { id: "m-ls-13", text: "0,25 = ?", options:[{id:"a",text:"1/2"},{id:"b",text:"1/3"},{id:"c",text:"1/4"},{id:"d",text:"2/5"}], answerId:"c", explanation:"0.25 = 1/4." },
          { id: "m-ls-14", text: "0,5 = ?", options:[{id:"a",text:"1/2"},{id:"b",text:"1/4"},{id:"c",text:"2/3"},{id:"d",text:"3/5"}], answerId:"a", explanation:"0.5 = 1/2." },
          { id: "m-ls-15", text: "Jika 4a = 20, maka a = ?", options:[{id:"a",text:"4"},{id:"b",text:"5"},{id:"c",text:"6"},{id:"d",text:"8"}], answerId:"b", explanation:"a=20/4=5." },
          { id: "m-ls-16", text: "Jika 3x+2=11 maka x = ?", options:[{id:"a",text:"2"},{id:"b",text:"3"},{id:"c",text:"4"},{id:"d",text:"5"}], answerId:"b", explanation:"3x=9 → x=3." },
          { id: "m-ls-17", text: "Barisan 2,5,8,11 → suku ke-4 = ?", options:[{id:"a",text:"11"},{id:"b",text:"14"},{id:"c",text:"17"},{id:"d",text:"20"}], answerId:"a", explanation:"2,5,8,11 → ke-4 = 11." },
          { id: "m-ls-18", text: "Ganjil antara 20 dan 26 = ?", options:[{id:"a",text:"21,22,23"},{id:"b",text:"21,23,25"},{id:"c",text:"22,24,26"},{id:"d",text:"20,22,24"}], answerId:"b", explanation:"21,23,25 adalah ganjil." },
          { id: "m-ls-19", text: "3² + 4² = ?", options:[{id:"a",text:"12"},{id:"b",text:"18"},{id:"c",text:"25"},{id:"d",text:"7"}], answerId:"c", explanation:"9+16=25." },
          { id: "m-ls-20", text: "1/4 = ?%", options:[{id:"a",text:"10%"},{id:"b",text:"20%"},{id:"c",text:"25%"},{id:"d",text:"40%"}], answerId:"c", explanation:"1/4 = 25%." }
        ],
        "Susah Banget": [
          // 20 harder math questions - keep correct
          { id: "m-sb-1", text: "Suku ke-5 aritmetika a1=3,d=4 adalah?", options:[{id:"a",text:"19"},{id:"b",text:"20"},{id:"c",text:"21"},{id:"d",text:"22"}], answerId:"a", explanation:"3+(5-1)*4=3+16=19." },
          { id: "m-sb-2", text: "Suku ke-10 aritmetika a1=2,d=3 adalah?", options:[{id:"a",text:"29"},{id:"b",text:"30"},{id:"c",text:"31"},{id:"d",text:"32"}], answerId:"a", explanation:"2+(10-1)*3=2+27=29." },
          { id: "m-sb-3", text: "Jumlah 5 suku pertama aritmetika a1=2,d=3 adalah?", options:[{id:"a",text:"25"},{id:"b",text:"35"},{id:"c",text:"40"},{id:"d",text:"45"}], answerId:"c", explanation:"S5=5/2(2a1+4d)=5/2(4+12)=5/2*16=40." },
          { id: "m-sb-4", text: "25% dari 160 = ?", options:[{id:"a",text:"30"},{id:"b",text:"35"},{id:"c",text:"40"},{id:"d",text:"45"}], answerId:"c", explanation:"25% = 1/4 → 160/4 = 40." },
          { id: "m-sb-5", text: "15% dari 280 = ?", options:[{id:"a",text:"36"},{id:"b",text:"40"},{id:"c",text:"42"},{id:"d",text:"45"}], answerId:"c", explanation:"0.15*280=42." },
          { id: "m-sb-6", text: "Luas persegi panjang p=12 l=7 = ?", options:[{id:"a",text:"72"},{id:"b",text:"80"},{id:"c",text:"84"},{id:"d",text:"90"}], answerId:"c", explanation:"12*7=84." },
          { id: "m-sb-7", text: "Keliling lingkaran r=7 (π=22/7) = ?", options:[{id:"a",text:"22"},{id:"b",text:"44"},{id:"c",text:"66"},{id:"d",text:"88"}], answerId:"b", explanation:"2πr=2*(22/7)*7=44." },
          { id: "m-sb-8", text: "Jika 5x−7=18, x = ?", options:[{id:"a",text:"3"},{id:"b",text:"4"},{id:"c",text:"5"},{id:"d",text:"6"}], answerId:"c", explanation:"5x=25 → x=5." },
          { id: "m-sb-9", text: "Jika 4x+6=26, x = ?", options:[{id:"a",text:"4"},{id:"b",text:"5"},{id:"c",text:"6"},{id:"d",text:"7"}], answerId:"b", explanation:"4x=20 → x=5." },
          { id: "m-sb-10", text: "(3² × 2) + 4 = ?", options:[{id:"a",text:"16"},{id:"b",text:"18"},{id:"c",text:"22"},{id:"d",text:"10"}], answerId:"c", explanation:"3²=9 → 9*2=18 → 18+4=22." },
          { id: "m-sb-11", text: "Diskon 20% dari 150000 = harga akhir?", options:[{id:"a",text:"110000"},{id:"b",text:"115000"},{id:"c",text:"120000"},{id:"d",text:"130000"}], answerId:"c", explanation:"20%*150000=30000 → 150000-30000=120000." },
          { id: "m-sb-12", text: "Barisan geometri a1=2 r=3 → suku ke-4?", options:[{id:"a",text:"18"},{id:"b",text:"20"},{id:"c",text:"24"},{id:"d",text:"54"}], answerId:"d", explanation:"a4=2*3^3=2*27=54." },
          { id: "m-sb-13", text: "3x−4=2x+5 → x = ?", options:[{id:"a",text:"1"},{id:"b",text:"5"},{id:"c",text:"9"},{id:"d",text:"-9"}], answerId:"c", explanation:"3x-2x=5+4 → x=9." },
          { id: "m-sb-14", text: "2³×3² = ?", options:[{id:"a",text:"18"},{id:"b",text:"24"},{id:"c",text:"32"},{id:"d",text:"72"}], answerId:"d", explanation:"2³=8, 3²=9 → 8*9=72." },
          { id: "m-sb-15", text: "5! = ?", options:[{id:"a",text:"60"},{id:"b",text:"100"},{id:"c",text:"120"},{id:"d",text:"24"}], answerId:"c", explanation:"5!=120." },
          { id: "m-sb-16", text: "Jika 2x+3y=22 dan x=5,y=4 → 2x+3y = ?", options:[{id:"a",text:"22"},{id:"b",text:"23"},{id:"c",text:"24"},{id:"d",text:"26"}], answerId:"a", explanation:"2*5+3*4=10+12=22." },
          { id: "m-sb-17", text: "√196 = ?", options:[{id:"a",text:"12"},{id:"b",text:"13"},{id:"c",text:"14"},{id:"d",text:"15"}], answerId:"c", explanation:"14*14=196." },
          { id: "m-sb-18", text: "Jika 40% = 32, bilangan = ?", options:[{id:"a",text:"60"},{id:"b",text:"70"},{id:"c",text:"80"},{id:"d",text:"90"}], answerId:"c", explanation:"0.4*N=32 → N=32/0.4=80." },
          { id: "m-sb-19", text: "Jumlah sudut segitiga = ?", options:[{id:"a",text:"90°"},{id:"b",text:"180°"},{id:"c",text:"270°"},{id:"d",text:"360°"}], answerId:"b", explanation:"Jumlah sudut segitiga = 180°." },
          { id: "m-sb-20", text: "Segitiga sama sisi sisi=10 → keliling?", options:[{id:"a",text:"20"},{id:"b",text:"25"},{id:"c",text:"30"},{id:"d",text:"40"}], answerId:"c", explanation:"3×10=30." }
        ]
      },
      "Bahasa Indonesia": {
        "Mudah": [
          { id:"bi-md-1", text:"Sinonim kata 'besar' adalah…", options:[{id:"a",text:"kecil"},{id:"b",text:"luas"},{id:"c",text:"agung"},{id:"d",text:"tinggi"}], answerId:"c", explanation:"Dalam konteks tertentu, 'besar' bisa bermakna 'agung'." },
          { id:"bi-md-2", text:"Antonim kata 'cepat' adalah…", options:[{id:"a",text:"lambat"},{id:"b",text:"sesaat"},{id:"c",text:"segera"},{id:"d",text:"ringkas"}], answerId:"a", explanation:"Antonim cepat = lambat." },
          { id:"bi-md-3", text:"Kalimat efektif itu…", options:[{id:"a",text:"bertele-tele"},{id:"b",text:"jelas dan singkat"},{id:"c",text:"sulit dimengerti"},{id:"d",text:"berbelit"}], answerId:"b", explanation:"Kalimat efektif: jelas & singkat." },
          { id:"bi-md-4", text:"Teks narasi biasanya bercerita tentang…", options:[{id:"a",text:"kronologi peristiwa"},{id:"b",text:"data statistik"},{id:"c",text:"instruksi"},{id:"d",text:"daftar belanja"}], answerId:"a", explanation:"Narasi menceritakan peristiwa berurutan." },
          { id:"bi-md-5", text:"Majas 'kau bagai bintang' termasuk majas…", options:[{id:"a",text:"metafora"},{id:"b",text:"simile"},{id:"c",text:"ironi"},{id:"d",text:"litotes"}], answerId:"b", explanation:"Perbandingan menggunakan 'seperti'/'bagai' = simile." },
          { id:"bi-md-6", text:"Tanda baca yang mengakhiri kalimat perintah biasa adalah…", options:[{id:"a",text:"?"},{id:"b",text:"!"},{id:"c",text:"."},{id:"d",text:","}], answerId:"c", explanation:"Kalimat perintah netral berakhir dengan titik." },
          { id:"bi-md-7", text:"Kata 'rumahku' menunjukkan jenis kata…", options:[{id:"a",text:"kata kerja"},{id:"b",text:"kata benda"},{id:"c",text:"kata sifat"},{id:"d",text:"kata keterangan"}], answerId:"b", explanation:"Rumahku = kata benda." },
          { id:"bi-md-8", text:"Sinonim 'bagus' adalah…", options:[{id:"a",text:"buruk"},{id:"b",text:"baik"},{id:"c",text:"jelek"},{id:"d",text:"parah"}], answerId:"b", explanation:"Bagus = baik." },
          { id:"bi-md-9", text:"Kata 'dia' termasuk kata…", options:[{id:"a",text:"kata ganti"},{id:"b",text:"kata tugas"},{id:"c",text:"kata sifat"},{id:"d",text:"kata bilangan"}], answerId:"a", explanation:"Dia = kata ganti orang." },
          { id:"bi-md-10", text:"Kalimat tanya biasanya diakhiri tanda…", options:[{id:"a",text:"."},{id:"b",text:"!"},{id:"c",text:"?"},{id:"d",text:","}], answerId:"c", explanation:"Kalimat tanya diakhiri tanda tanya." },
          { id:"bi-md-11", text:"Kata 'berlari' termasuk contoh…", options:[{id:"a",text:"kata benda"},{id:"b",text:"kata kerja"},{id:"c",text:"kata sifat"},{id:"d",text:"kata depan"}], answerId:"b", explanation:"Berlari = kata kerja." },
          { id:"bi-md-12", text:"Kata 'indah' termasuk jenis kata…", options:[{id:"a",text:"kata sifat"},{id:"b",text:"kata kerja"},{id:"c",text:"kata ganti"},{id:"d",text:"kata bilangan"}], answerId:"a", explanation:"Indah = kata sifat." },
          { id:"bi-md-13", text:"Sinonim 'berani' adalah…", options:[{id:"a",text:"penakut"},{id:"b",text:"gagah"},{id:"c",text:"malu"},{id:"d",text:"lemah"}], answerId:"b", explanation:"Berani = gagah." },
          { id:"bi-md-14", text:"Kata 'dan' berfungsi sebagai…", options:[{id:"a",text:"kata hubung"},{id:"b",text:"kata ganti"},{id:"c",text:"kata depan"},{id:"d",text:"kata keterangan"}], answerId:"a", explanation:"Dan = konjungsi / kata hubung." },
          { id:"bi-md-15", text:"Jenis teks yang menceritakan tentang pengalaman pribadi adalah…", options:[{id:"a",text:"eksposisi"},{id:"b",text:"narasi"},{id:"c",text:"deskripsi"},{id:"d",text:"argumentasi"}], answerId:"b", explanation:"Pengalaman pribadi biasanya disajikan secara naratif." },
          { id:"bi-md-16", text:"Kalimat 'Andi makan nasi' termasuk kalimat…", options:[{id:"a",text:"aktif"},{id:"b",text:"pasif"},{id:"c",text:"tanya"},{id:"d",text:"perintah"}], answerId:"a", explanation:"Kalimat Subjek-Verba-Objek = aktif." },
          { id:"bi-md-17", text:"Suku kata pada kata 'kegiatan' terbagi menjadi…", options:[{id:"a",text:"ki-e-gi-at-an"},{id:"b",text:"ki-eg-i-at-an"},{id:"c",text:"ki-e-gi-at"},{id:"d",text:"ki-e-gi-at-an"}], answerId:"d", explanation:"kegiatan = ki-e-gi-at-an (pemenggalan suku kata umum)." },
          { id:"bi-md-18", text:"Kata 'sering' termasuk jenis kata…", options:[{id:"a",text:"kata sifat"},{id:"b",text:"kata keterangan"},{id:"c",text:"kata kerja"},{id:"d",text:"kata bilangan"}], answerId:"b", explanation:"Sering = kata keterangan (keterangan frekuensi)." },
          { id:"bi-md-19", text:"Kata ulang pada bahasa Indonesia yang bermakna jamak misal 'buku-buku' disebut…", options:[{id:"a",text:"reduplicasi"},{id:"b",text:"afiksasi"},{id:"c",text:"klitika"},{id:"d",text:"konjungsi"}], answerId:"a", explanation:"Pengulangan kata = reduplikasi." },
          { id:"bi-md-20", text:"Kalimat 'Dia sedang belajar' mengandung kata 'sedang' sebagai…", options:[{id:"a",text:"kata kerja"},{id:"b",text:"kata bantu"},{id:"c",text:"kata keterangan waktu"},{id:"d",text:"kata depan"}], answerId:"c", explanation:"Sedang menunjukkan aspek/progres → keterangan waktu/aspek." }
        ],
        "Lumayan Susah": [
          // 20 intermediate Bahasa Indonesia
          { id:"bi-ls-1", text:"Jenis teks yang tujuannya meyakinkan pembaca adalah…", options:[{id:"a",text:"narasi"},{id:"b",text:"argumentasi"},{id:"c",text:"deskripsi"},{id:"d",text:"prosedur"}], answerId:"b", explanation:"Argumentasi bertujuan meyakinkan/persuasi." },
          { id:"bi-ls-2", text:"Teks eksposisi berisi…", options:[{id:"a",text:"pendapat dan alasan"},{id:"b",text:"langkah-langkah"},{id:"c",text:"urutan cerita"},{id:"d",text:"puisi"}], answerId:"a", explanation:"Eksposisi menjelaskan pendapat/pengetahuan." },
          { id:"bi-ls-3", text:"Kalimat pasif contohnya…", options:[{id:"a",text:"Ibu memasak nasi."},{id:"b",text:"Nasi dimasak oleh Ibu."},{id:"c",text:"Siapa yang memasak?"},{id:"d",text:"Masaklah nasi!"}], answerId:"b", explanation:"Subjek menerima tindakan → pasif." },
          { id:"bi-ls-4", text:"Teks prosedur biasanya berisi…", options:[{id:"a",text:"tik langkah"},{id:"b",text:"narasi"},{id:"c",text:"argumentasi"},{id:"d",text:"deskripsi"}], answerId:"a", explanation:"Prosedur menyajikan langkah-langkah." },
          { id:"bi-ls-5", text:"Kata 'oleh' pada kalimat pasif berfungsi sebagai…", options:[{id:"a",text:"kata kerja"},{id:"b",text:"kata penghubung agen"},{id:"c",text:"kata keterangan"},{id:"d",text:"kata benda"}], answerId:"b", explanation:"'Oleh' menunjuk agen pelaku pada pasif." },
          { id:"bi-ls-6", text:"Makna konotasi kata 'rumah' dapat berupa…", options:[{id:"a",text:"tempat tinggal"},{id:"b",text:"simbol kehangatan"},{id:"c",text:"gedung"},{id:"d",text:"tanah"}], answerId:"b", explanation:"Konotasi: makna kiasan seperti kehangatan keluarga." },
          { id:"bi-ls-7", text:"Salah satu ciri teks deskripsi adalah…", options:[{id:"a",text:"memberi langkah"},{id:"b",text:"menggambarkan detail"},{id:"c",text:"berisi argumen"},{id:"d",text:"memuat dialog"}], answerId:"b", explanation:"Deskripsi menggambarkan rincian objek." },
          { id:"bi-ls-8", text:"Kalimat majemuk setara dihubungkan dengan…", options:[{id:"a",text:"kata hubung"},{id:"b",text:"tanda koma saja"},{id:"c",text:"tanda seru"},{id:"d",text:"tanda tanya"}], answerId:"a", explanation:"Menggunakan konjungsi/sejenisnya." },
          { id:"bi-ls-9", text:"Kata 'walaupun' fungsinya sebagai…", options:[{id:"a",text:"konjungsi pengandaian"},{id:"b",text:"konjungsi pertentangan"},{id:"c",text:"kata depan"},{id:"d",text:"kata sandang"}], answerId:"b", explanation:"Walaupun = kontrast/pertentangan." },
          { id:"bi-ls-10", text:"Gaya bahasa hiperbola artinya…", options:[{id:"a",text:"berlebihan"},{id:"b",text:"ringkas"},{id:"c",text:"nyata"},{id:"d",text:"mengecilkan"}], answerId:"a", explanation:"Hiperbola = berlebihan untuk efek." },
          { id:"bi-ls-11", text:"Perbedaan antara sinonim dan antonim adalah…", options:[{id:"a",text:"sinonim lawan kata"},{id:"b",text:"sinonim = padanan makna, antonim = lawan makna"},{id:"c",text:"keduanya sama"},{id:"d",text:"keduanya tipe majas"}], answerId:"b", explanation:"Sinonim = mirip, antonim = berlawanan." },
          { id:"bi-ls-12", text:"Kalimat 'Ia belajar agar lulus' kata 'agar' menunjukkan…", options:[{id:"a",text:"waktu"},{id:"b",text:"tujuan"},{id:"c",text:"sebab"},{id:"d",text:"syarat"}], answerId:"b", explanation:"Agar menunjukkan tujuan." },
          { id:"bi-ls-13", text:"Teks laporan hasil observasi berisi…", options:[{id:"a",text:"hasil pengamatan faktual"},{id:"b",text:"fiksi"},{id:"c",text:"puisi"},{id:"d",text:"resep masakan"}], answerId:"a", explanation:"Observasi = laporan fakta." },
          { id:"bi-ls-14", text:"Kalimat langsung ditandai tanda …", options:[{id:"a",text:"kurung()"},{id:"b",text:"kutip\" \""},{id:"c",text:"titik saja"},{id:"d",text:"tanda hubung"}], answerId:"b", explanation:"Ucapan langsung diberi tanda kutip." },
          { id:"bi-ls-15", text:"Penyebab munculnya kesalahan ejaan disebut…", options:[{id:"a",text:"typo"},{id:"b",text:"sintaks"},{id:"c",text:"semantik"},{id:"d",text:"morfem"}], answerId:"a", explanation:"Typo = kesalahan ketik/penulisan." },
          { id:"bi-ls-16", text:"Kalimat 'Dia meraih medali karena latihan keras' kata 'karena' menunjukkan…", options:[{id:"a",text:"sebab"},{id:"b",text:"tujuan"},{id:"c",text:"konsekuensi"},{id:"d",text:"waktu"}], answerId:"a", explanation:"Karena = sebab." },
          { id:"bi-ls-17", text:"Kalimat efektif sebaiknya…", options:[{id:"a",text:"mengulang-ulang kata"},{id:"b",text:"mempunyai ide jelas"},{id:"c",text:"menggunakan banyak majas"},{id:"d",text:"panjang"}], answerId:"b", explanation:"Efektif = jelas & padat ide." },
          { id:"bi-ls-18", text:"Kalimat 'Buku itu dibaca oleh Siti' adalah aktif/pasif?", options:[{id:"a",text:"Aktif"},{id:"b",text:"Pasif"},{id:"c",text:"Tanya"},{id:"d",text:"Perintah"}], answerId:"b", explanation:"Subjek menerima tindakan → pasif." },
          { id:"bi-ls-19", text:"Salah satu fungsi teks eksplanasi adalah…", options:[{id:"a",text:"menjelaskan proses"},{id:"b",text:"menginformasikan promosi"},{id:"c",text:"menghibur"},{id:"d",text:"menulis resep"}], answerId:"a", explanation:"Eksplanasi menjelaskan sebab-akibat/proses." },
          { id:"bi-ls-20", text:"Kata berimbuhan 'mem-' pada 'membaca' menunjukkan jenis afiks…", options:[{id:"a",text:"prefiks"},{id:"b",text:"sufiks"},{id:"c",text:"infix"},{id:"d",text:"konfix"}], answerId:"a", explanation:"'mem-' = prefiks (awalan)." }
        ],
        "Susah Banget": [
          // 20 advanced Bahasa Indonesia
          { id:"bi-sb-1", text:"Analisis kalimat: 'Meskipun hujan, ia tetap berangkat.' Kata 'meskipun' berfungsi sebagai…", options:[{id:"a",text:"konjungsi pengandaian"},{id:"b",text:"konjungsi pertentangan"},{id:"c",text:"kata keterangan"},{id:"d",text:"kata depan"}], answerId:"b", explanation:"Meskipun = pertentangan/kontras." },
          { id:"bi-sb-2", text:"Perbedaan struktur teks eksposisi dan argumentasi terletak pada…", options:[{id:"a",text:"eksposisi menyampaikan fakta, argumentasi berusaha meyakinkan"},{id:"b",text:"eksposisi fiksi, argumentasi fakta"},{id:"c",text:"tidak ada perbedaan"},{id:"d",text:"keduanya sama-sama prosedur"}], answerId:"a", explanation:"Eksposisi menyampaikan informasi/fakta, argumentasi menyajikan pendapat + alasan." },
          { id:"bi-sb-3", text:"Maksud majas ironi adalah…", options:[{id:"a",text:"memuji secara berlebihan"},{id:"b",text:"menyindir dengan makna kebalikan"},{id:"c",text:"menjelaskan"},{id:"d",text:"memberi instruksi"}], answerId:"b", explanation:"Ironi = sindiran/ungkapan berlawanan makna." },
          { id:"bi-sb-4", text:"Teks persuasi berfokus pada…", options:[{id:"a",text:"menghibur pembaca"},{id:"b",text:"mengajak/menyakinkan pembaca"},{id:"c",text:"menceritakan peristiwa"},{id:"d",text:"menjelaskan proses ilmiah"}], answerId:"b", explanation:"Persuasi bertujuan mengajak/meyakinkan." },
          { id:"bi-sb-5", text:"Penggunaan ejaan baku penting untuk…", options:[{id:"a",text:"mengurangi kebingungan pembaca"},{id:"b",text:"mengganti makna"},{id:"c",text:"menambah panjang teks"},{id:"d",text:"mengubah fakta"}], answerId:"a", explanation:"Ejaan baku menjaga kejelasan & konsistensi." },
          { id:"bi-sb-6", text:"Perbedaan sinonim kata 'rumit' dan 'sulit' ialah…", options:[{id:"a",text:"sama persis"},{id:"b",text:"rumit lebih pada struktur, sulit pada tingkat kesulitan"},{id:"c",text:"lawannya sama"},{id:"d",text:"keduanya majas"}], answerId:"b", explanation:"Istilah nuance: rumit = kompleksitas struktur, sulit = tingkat kesulitan." },
          { id:"bi-sb-7", text:"Kalimat efektif sebaiknya tidak mengandung…", options:[{id:"a",text:"redundansi"},{id:"b",text:"ide jelas"},{id:"c",text:"subjek"},{id:"d",text:"predikat"}], answerId:"a", explanation:"Redundansi = pengulangan tidak perlu → hindari." },
          { id:"bi-sb-8", text:"Kalimat 'Jika kamu rajin, maka berhasil' memiliki struktur…", options:[{id:"a",text:"kondisional"},{id:"b",text:"iteratif"},{id:"c",text:"imperatif"},{id:"d",text:"interogatif"}], answerId:"a", explanation:"Memuat syarat → kondisional." },
          { id:"bi-sb-9", text:"Kesalahan penggunaan kata 'di' (awalan) dan 'di' (kata depan) contoh: 'dia di rumah' harusnya...", options:[{id:"a",text:"di rumah (kata depan benar)"},{id:"b",text:"dirumah (digabung)"},{id:"c",text:"di-rumah (pakai tanda)"},{id:"d",text:"di rumah selalu salah"}], answerId:"a", explanation:"'di' sebagai kata depan harus dipisah: di rumah." },
          { id:"bi-sb-10", text:"Analisis paragraf: topik kalimat biasanya berada di…", options:[{id:"a",text:"awal paragraf"},{id:"b",text:"tengah tanpa pola"},{id:"c",text:"akhir paragraf"},{id:"d",text:"tidak ada"}], answerId:"a", explanation:"Umumnya topik/kalimat utama di awal (topic sentence)." },
          { id:"bi-sb-11", text:"Salah satu ciri kalimat efektif adalah koherensi yang berarti…", options:[{id:"a",text:"kata-kata rapi"},{id:"b",text:"hubungan antar ide jelas"},{id:"c",text:"banyak majas"},{id:"d",text:"panjang kalimat"}], answerId:"b", explanation:"Koherensi = keterkaitan ide yang logis." },
          { id:"bi-sb-12", text:"Teknik elaborasi argumen yang baik termasuk…", options:[{id:"a",text:"menyajikan bukti"},{id:"b",text:"mengulang klaim saja"},{id:"c",text:"mengaburkan fakta"},{id:"d",text:"menyerang personal"}], answerId:"a", explanation:"Argumen kuat didukung bukti/penjelasan." },
          { id:"bi-sb-13", text:"Dalam menulis ringkasan, informasi yang diambil sebaiknya…", options:[{id:"a",text:"semua detail"},{id:"b",text:"ide pokok saja"},{id:"c",text:"opini pribadi"},{id:"d",text:"ilustrasi panjang"}], answerId:"b", explanation:"Ringkasan memuat ide pokok, bukan rinciannya." },
          { id:"bi-sb-14", text:"Perbedaan fakta dan opini adalah…", options:[{id:"a",text:"fakta dapat diverifikasi, opini bersifat penilaian"},{id:"b",text:"opini lebih benar"},{id:"c",text:"fakta selalu subjektif"},{id:"d",text:"tidak ada perbedaan"}], answerId:"a", explanation:"Fakta bisa dibuktikan; opini penilaian/pendapat." },
          { id:"bi-sb-15", text:"Salah satu langkah revisi tulisan adalah…", options:[{id:"a",text:"mencari sinonim saja"},{id:"b",text:"memperbaiki struktur & kejelasan"},{id:"c",text:"menambah kata tanpa alasan"},{id:"d",text:"menghapus semua tanda baca"}], answerId:"b", explanation:"Revisi fokus perbaiki struktur, kejelasan, kesalahan." },
          { id:"bi-sb-16", text:"Penggunaan tata bahasa yang benar penting untuk…", options:[{id:"a",text:"meningkatkan kredibilitas penulis"},{id:"b",text:"mengurangi panjang kalimat"},{id:"c",text:"menggantikan fakta"},{id:"d",text:"membuat teks lucu"}], answerId:"a", explanation:"Bahasa benar meningkatkan kredibilitas & profesionalisme." },
          { id:"bi-sb-17", text:"Ciri teks argumentatif adalah adanya…", options:[{id:"a",text:"klaim, alasan, bukti"},{id:"b",text:"langkah procedur"},{id:"c",text:"deskripsi objek"},{id:"d",text:"kumpulan kata acak"}], answerId:"a", explanation:"Argumentasi: klaim + alasan + bukti." },
          { id:"bi-sb-18", text:"Penulisan kutipan langsung harus disertai…", options:[{id:"a",text:"tanda kutip & sumber"},{id:"b",text:"hanya sumber"},{id:"c",text:"hanya tanda kurung"},{id:"d",text:"tidak perlu apa-apa"}], answerId:"a", explanation:"Kutipan langsung: tanda kutip & sumber referensi." },
          { id:"bi-sb-19", text:"Teknik persuasi pathos lebih menekankan pada…", options:[{id:"a",text:"logika"},{id:"b",text:"emosi pembaca"},{id:"c",text:"fakta statistik"},{id:"d",text:"bahasa teknis"}], answerId:"b", explanation:"Pathos = emosi; ethos = kredibilitas; logos = logika." },
          { id:"bi-sb-20", text:"Saat menyunting, cek hal berikut kecuali…", options:[{id:"a",text:"ejaan"},{id:"b",text:"koherensi"},{id:"c",text:"keaslian sumber"},{id:"d",text:"warna font"}], answerId:"d", explanation:"Warna font bukan aspek penting saat menyunting isi." }
        ]
      },
      "IPA": {
        "Mudah": [
          { id:"ipa-md-1", text:"Sumber energi yang dapat diperbarui contohnya…", options:[{id:"a",text:"batu bara"},{id:"b",text:"minyak bumi"},{id:"c",text:"angin"},{id:"d",text:"gas alam"}], answerId:"c", explanation:"Angin termasuk energi terbarukan." },
          { id:"ipa-md-2", text:"Organ tubuh yang berfungsi memompa darah adalah…", options:[{id:"a",text:"paru-paru"},{id:"b",text:"hati"},{id:"c",text:"otak"},{id:"d",text:"jantung"}], answerId:"d", explanation:"Jantung memompa darah." },
          { id:"ipa-md-3", text:"Air mendidih pada suhu kira-kira (di permukaan laut) …", options:[{id:"a",text:"50°C"},{id:"b",text:"75°C"},{id:"c",text:"100°C"},{id:"d",text:"120°C"}], answerId:"c", explanation:"Titik didih air ~100°C pada tekanan atmosfer normal." },
          { id:"ipa-md-4", text:"Benda yang mengapung di air karena memiliki sifat…", options:[{id:"a",text:"lebih padat dari air"},{id:"b",text:"lebih ringan/lebih rendah densitas"},{id:"c",text:"warna cerah"},{id:"d",text:"besar"}], answerId:"b", explanation:"Mengapung → densitas lebih kecil daripada air." },
          { id:"ipa-md-5", text:"Proses perubahan wujud padat → cair disebut…", options:[{id:"a",text:"penguapan"},{id:"b",text:"mencair"},{id:"c",text:"kondensasi"},{id:"d",text:"sublimasi"}], answerId:"b", explanation:"Padat→cair = mencair." },
          { id:"ipa-md-6", text:"Tumbuhan membuat makanan melalui proses…", options:[{id:"a",text:"respirasi"},{id:"b",text:"fotosintesis"},{id:"c",text:"fermentasi"},{id:"d",text:"dekomposisi"}], answerId:"b", explanation:"Fotosintesis: klorofil + cahaya → glukosa." },
          { id:"ipa-md-7", text:"Unit terkecil makhluk hidup disebut…", options:[{id:"a",text:"organ"},{id:"b",text:"sel"},{id:"c",text:"jaringan"},{id:"d",text:"sistem"}], answerId:"b", explanation:"Sel = unit struktural/ fungsional makhluk hidup." },
          { id:"ipa-md-8", text:"Bagian tumbuhan yang menyerap air adalah…", options:[{id:"a",text:"daun"},{id:"b",text:"batang"},{id:"c",text:"akar"},{id:"d",text:"bunga"}], answerId:"c", explanation:"Akar menyerap air & mineral." },
          { id:"ipa-md-9", text:"Benda bermassa besar cenderung memiliki…", options:[{id:"a",text:"lebih sedikit materi"},{id:"b",text:"lebih banyak materi"},{id:"c",text:"tidak dapat diukur"},{id:"d",text:"warna gelap"}], answerId:"b", explanation:"Massa = jumlah materi." },
          { id:"ipa-md-10", text:"Benda yang meneruskan listrik disebut…", options:[{id:"a",text:"isolator"},{id:"b",text:"konduktor"},{id:"c",text:"magnit"},{id:"d",text:"plastik"}], answerId:"b", explanation:"Konduktor menghantarkan arus listrik." },
          { id:"ipa-md-11", text:"Sumber utama oksigen di atmosfer adalah…", options:[{id:"a",text:"bakteri"},{id:"b",text:"tumbuhan"},{id:"c",text:"batu"},{id:"d",text:"manusia"}], answerId:"b", explanation:"Tumbuhan melalui fotosintesis menghasilkan oksigen." },
          { id:"ipa-md-12", text:"Perubahan wujud cair → gas disebut…", options:[{id:"a",text:"mencair"},{id:"b",text:"menguap"},{id:"c",text:"membeku"},{id:"d",text:"kondensasi"}], answerId:"b", explanation:"Cair→gas = menguap." },
          { id:"ipa-md-13", text:"Hewan yang memakan tumbuhan disebut…", options:[{id:"a",text:"karnivora"},{id:"b",text:"herbivora"},{id:"c",text:"omnivora"},{id:"d",text:"parasita"}], answerId:"b", explanation:"Herbivora = pemakan tumbuhan." },
          { id:"ipa-md-14", text:"Energi yang disimpan dalam makanan bersifat…", options:[{id:"a",text:"kinetik"},{id:"b",text:"potensial"},{id:"c",text:"panas"},{id:"d",text:"suara"}], answerId:"b", explanation:"Energi kimia dalam makanan = energi potensial." },
          { id:"ipa-md-15", text:"Jalan udara pada manusia disebut…", options:[{id:"a",text:"esofagus"},{id:"b",text:"trakea"},{id:"c",text:"usus"},{id:"d",text:"alveolus"}], answerId:"b", explanation:"Trakea menghubungkan laring ke paru-paru." },
          { id:"ipa-md-16", text:"Salah satu sumber panas alami adalah…", options:[{id:"a",text:"matahari"},{id:"b",text:"lampu"},{id:"c",text:"kompor listrik"},{id:"d",text:"setrika"}], answerId:"a", explanation:"Matahari sumber panas/energi utama Bumi." },
          { id:"ipa-md-17", text:"Benda yang tidak memiliki bentuk tetap disebut…", options:[{id:"a",text:"padat"},{id:"b",text:"cair"},{id:"c",text:"gas"},{id:"d",text:"plasma"}], answerId:"b", explanation:"Cair memiliki bentuk wadah, tidak tetap." },
          { id:"ipa-md-18", text:"Perubahan warna daun di musim gugur terjadi karena …", options:[{id:"a",text:"bertambah klorofil"},{id:"b",text:"berkurang klorofil"},{id:"c",text:"pupuk berlebih"},{id:"d",text:"serangga"}], answerId:"b", explanation:"Klorofil berkurang sehingga pigmen lain terlihat." },
          { id:"ipa-md-19", text:"Proses pencernaan yang memecah makanan secara mekanik terjadi di …", options:[{id:"a",text:"lambung"},{id:"b",text:"mulut"},{id:"c",text:"usus halus"},{id:"d",text:"lambung & mulut"}], answerId:"b", explanation:"Pengunyahan di mulut = pencernaan mekanik awal." },
          { id:"ipa-md-20", text:"Contoh benda yang merupakan isolator listrik: …", options:[{id:"a",text:"tembaga"},{id:"b",text:"aluminium"},{id:"c",text:"karet"},{id:"d",text:"baja"}], answerId:"c", explanation:"Karet = isolator listrik." }
        ],
        "Lumayan Susah": [
          // 20 intermediate IPA
          { id:"ipa-ls-1", text:"Fungsi paru-paru adalah …", options:[{id:"a",text:"memompa darah"},{id:"b",text:"pertukaran gas O2 & CO2"},{id:"c",text:"mencerna makanan"},{id:"d",text:"mengatur hormon"}], answerId:"b", explanation:"Paru-paru bertukar oksigen dan karbon dioksida." },
          { id:"ipa-ls-2", text:"Fotosintesis terjadi di bagian tumbuhan yang mengandung …", options:[{id:"a",text:"mitokondria"},{id:"b",text:"kloroplas"},{id:"c",text:"ribosom"},{id:"d",text:"nukleus"}], answerId:"b", explanation:"Kloroplas tempat fotosintesis (klorofil)." },
          { id:"ipa-ls-3", text:"Gaya gravitasi menyebabkan benda …", options:[{id:"a",text:"melayang"},{id:"b",text:"jatuh ke bawah"},{id:"c",text:"menyusut"},{id:"d",text:"mengembang"}], answerId:"b", explanation:"Gaya gravitasi menarik ke pusat bumi." },
          { id:"ipa-ls-4", text:"Contoh perubahan kimia adalah …", options:[{id:"a",text:"mencairnya es"},{id:"b",text:"pembakaran kayu"},{id:"c",text:"melarut gula"},{id:"d",text:"mengukus air"}], answerId:"b", explanation:"Pembakaran → perubahan kimia menghasilkan zat baru." },
          { id:"ipa-ls-5", text:"Satuan massa SI adalah …", options:[{id:"a",text:"liter"},{id:"b",text:"meter"},{id:"c",text:"kilogram"},{id:"d",text:"derajat"}], answerId:"c", explanation:"Satuan massa = kilogram (kg)." },
          { id:"ipa-ls-6", text:"Contoh organisme tingkat rendah: …", options:[{id:"a",text:"bakteri"},{id:"b",text:"kucing"},{id:"c",text:"manusia"},{id:"d",text:"ayam"}], answerId:"a", explanation:"Bakteri organisme bersel tunggal/ sederhana." },
          { id:"ipa-ls-7", text:"Reaksi konsendasi adalah perubahan dari …", options:[{id:"a',text:'gas→cair'},{id:'b',text:'cair→gas'},{id:'c',text:'padat→cair'},{id:'d',text:'padat→gas'}], answerId:"a", explanation:"Kondensasi = uap → cair." },
          { id:"ipa-ls-8', text:'Penyakit menular yang disebabkan oleh bakteri contohnya…', options:[{id:'a',text:'influenza'},{id:'b',text:'tuberkolosis'},{id:'c',text:'flu burung'},{id:'d',text:'infeksi jamur'}], answerId:'b', explanation:'Tuberkulosis disebabkan oleh bakteri Mycobacterium.' },
          { id:'ipa-ls-9', text:'Siklus air meliputi proses berikut, kecuali…', options:[{id:'a',text:'penguapan'},{id:'b',text:'kondensasi'},{id:'c',text:'presipitasi'},{id:'d',text:'pengaratan'}], answerId:'d', explanation:'Pengaratan bukan bagian siklus air.' },
          { id:'ipa-ls-10', text:'Energi kinetik terkait dengan …', options:[{id:'a',text:'posisi'},{id:'b',text:'gerak'},{id:'c',text:'warna'},{id:'d',text:'bentuk'}], answerId:'b', explanation:'Kinetik = energi gerak.' },
          { id:'ipa-ls-11', text:'Zat yang tidak dapat dipecah lagi dengan reaksi kimia biasa disebut…', options:[{id:'a',text:'senyawa'},{id:'b',text:'elemen'},{id:'c',text:'campuran'},{id:'d',text:'larutan'}], answerId:'b', explanation:'Elemen terdiri satu jenis atom.' },
          { id:'ipa-ls-12', text:'Fungsi akar adventif pada tumbuhan adalah…', options:[{id:'a',text:'menghisap makanan'},{id:'b',text:'menyokong & menyerap air'},{id:'c',text:'fotosintesis'},{id:'d',text:'membuat biji'}], answerId:'b', explanation:'Akar adventif membantu penopang & serapan.' },
          { id:'ipa-ls-13', text:'Jalur utama pencernaan manusia dimulai dari…', options:[{id:'a',text:'mulut'},{id:'b',text:'lambung'},{id:'c',text:'usus halus'},{id:'d',text:'hati'}], answerId:'a', explanation:'Pencernaan dimulai dari mulut.' },
          { id:'ipa-ls-14', text:'Salah satu gas rumah kaca yang utama adalah…', options:[{id:'a',text:'oksigen'},{id:'b',text:'karbon dioksida'},{id:'c',text:'nitrogen'},{id:'d',text:'argon'}], answerId:'b', explanation:'CO2 adalah gas rumah kaca utama.' },
          { id:'ipa-ls-15', text:'Alat untuk melihat struktur kecil di sel adalah…', options:[{id:'a',text:'mikroskop'},{id:'b',text:'mata telanjang'},{id:'c',text:'kamera'},{id:'d',text:'termometer'}], answerId:'a', explanation:'Mikroskop melihat objek mikroskopis.' },
          { id:'ipa-ls-16', text:'Pengukuran suhu menggunakan satuan…', options:[{id:'a',text:'meter'},{id:'b',text:'celcius'},{id:'c',text:'kilogram'},{id:'d',text:'ampere'}], answerId:'b', explanation:'Satuan suhu: °C (Celsius).' },
          { id:'ipa-ls-17', text:'Benda yang memantulkan cahaya disebut…', options:[{id:'a',text:'transparan'},{id:'b',text:'reflektif'},{id:'c',text:'berwarna'},{id:'d',text:'legam'}], answerId:'b', explanation:'Reflektif = memantulkan cahaya.' },
          { id:'ipa-ls-18', text:'Salah satu contoh pelarut universal adalah…', options:[{id:'a',text:'minyak'},{id:'b',text:'air'},{id:'c',text:'alkohol'},{id:'d',text:'asap'}], answerId:'b', explanation:'Air pelarut luas untuk banyak zat.' },
          { id:'ipa-ls-19', text:'Konduktor panas yang baik contohnya…', options:[{id:'a',text:'kayu'},{id:'b',text:'karet'},{id:'c',text:'tembaga'},{id:'d',text:'kaca'}], answerId:'c', explanation:'Logam seperti tembaga menghantarkan panas.' },
          { id:'ipa-ls-20', text:'Perubahan zat yang bersifat reversibel contohnya…', options:[{id:'a',text:'pembakaran'},{id:'b',text:'mencairnya lilin'},{id:'c',text:'pembuangan sampah'},{id:'d',text:'pengkaratan'}], answerId:'b', explanation:'Mencairnya lilin bisa kembali membeku (reversibel).' }
        ],
        "Susah Banget": [
          // 20 advanced IPA
          { id:"ipa-sb-1", text:"Oksidasi adalah proses …", options:[{id:"a",text:"penambahan elektron"},{id:"b",text:"kehilangan elektron"},{id:"c",text:"pembentukan air"},{id:"d",text:"pendinginan"}], answerId:"b", explanation:"Oksidasi = kehilangan elektron." },
          { id:"ipa-sb-2", text:"Respirasi sel adalah proses menghasilkan …", options:[{id:"a",text:"glukosa"},{id:"b",text:"energi ATP"},{id:"c",text:"oksigen"},{id:"d",text:"klorofil"}], answerId:"b", explanation:"Respirasi menghasilkan ATP sebagai energi sel." },
          { id:"ipa-sb-3", text:"pH < 7 menunjukkan larutan bersifat …", options:[{id:"a",text:"asam"},{id:"b",text:"basa"},{id:"c",text:"netral"},{id:"d",text:"garam"}], answerId:"a", explanation:"pH kurang dari 7 = asam." },
          { id:"ipa-sb-4", text:"Gaya gesek berkurang jika permukaan menjadi …", options:[{id:"a",text:"kasar"},{id:"b",text:"licin"},{id:"c",text:"bersih"},{id:"d",text:"besar"}], answerId:"b", explanation:"Permukaan licin mengurangi gesekan." },
          { id:"ipa-sb-5", text:"Contoh organisme autotrop yaitu …", options:[{id:"a",text:"jamur"},{id:"b",text:"tumbuhan"},{id:"c",text:"hewan"},{id:"d",text:"protozoa"}], answerId:"b", explanation:"Tumbuhan membuat makanan sendiri (autotrof)." },
          { id:"ipa-sb-6", text:"Ion adalah …", options:[{id:"a",text:"atom netral"},{id:"b",text:"atom bermuatan"},{id:"c",text:"molekul besar"},{id:"d",text:"tipe sel"}], answerId:"b", explanation:"Ion = atom/molekul yang bermuatan listrik." },
          { id:"ipa-sb-7", text:"Kombinasi tekanan & volume gas ideal mengikuti hukum …", options:[{id:"a",text:"Newton"},{id:"b",text:"Boyle"},{id:"c",text:"Hooke"},{id:"d",text:"Ohm"}], answerId:"b", explanation:"Hukum Boyle (P*V=konst pada T tetap)." },
          { id:"ipa-sb-8", text:"Proses ekologi rantai makanan dimulai dari …", options:[{id:"a",text:"karnivora"},{id:"b",text:"herbivora"},{id:"c",text:"produsen"},{id:"d",text:"decomposer"}], answerId:"c", explanation:"Produsen (tumbuhan) di dasar rantai makanan." },
          { id:"ipa-sb-9", text:"Fungsi enzim dalam tubuh adalah …", options:[{id:"a",text:"menurunkan laju reaksi"},{id:"b",text:"meningkatkan energi aktivasi"},{id:"c",text:"mempercepat reaksi kimia"},{id:"d",text:"menggantikan hormon"}], answerId:"c", explanation:"Enzim mempercepat reaksi (biokatalis)." },
          { id:"ipa-sb-10", text:"Suhu badan manusia normal sekitar …", options:[{id:"a",text:"30°C"},{id:"b",text:"36–37°C"},{id:"c",text:"40–41°C"},{id:"d",text:"20°C"}], answerId:"b", explanation:"Rentang normal ~36–37°C." },
          { id:"ipa-sb-11", text:"Fotosintesis menghasilkan oksigen dari …", options:[{id:"a",text:"air"},{id:"b",text:"karbon dioksida"},{id:"c",text:"glukosa"},{id:"d",text:"nitrogen"}], answerId:"a", explanation:"Air (H2O) dipecah → oksigen dilepaskan." },
          { id:"ipa-sb-12", text:"Konduktivitas listrik dalam logam disebabkan oleh …", options:[{id:"a",text:"ion"},{id:"b",text:"elektron bebas"},{id:"c",text:"molekul"},{id:"d",text:"udara"}], answerId:"b", explanation:"Elektron bebas mengalir sehingga menghantarkan listrik." },
          { id:"ipa-sb-13", text:"Tumbuhan C4 lebih efisien pada kondisi …", options:[{id:"a",text:"dingin & lembab"},{id:"b",text:"panas & kering"},{id:"c',text:'gelap'},{id:'d',text:'basah terus-menerus'}], answerId:"b", explanation:"Tumbuhan C4 adaptif pada panas & kekeringan." },
          { id:"ipa-sb-14', text:'Mutasi genetik dapat menyebabkan…', options:[{id:'a',text:'tidak ada perubahan'},{id:'b',text:'perubahan sifat'},{id:'c',text:'punah instan'},{id:'d',text:'semua organisme berubah'}], answerId:'b', explanation:'Mutasi dapat mengubah sifat/fenotip.' },
          { id:'ipa-sb-15', text:'Hukum Newton I menyatakan bahwa benda tetap bergerak lurus beres terus jika…', options:[{id:'a',text:'gaya resultant nol'},{id:'b',text:'adanya gaya'},{id:'c',text:'kecepatan nol'},{id:'d',text:'suhu tinggi'}], answerId:'a', explanation:'Inersia: tanpa gaya resultant, gerak tetap.' },
          { id:'ipa-sb-16', text:'Pemisahan campuran bila komponen memiliki titik didih berbeda dapat memakai…', options:[{id:'a',text:'filtrasi'},{id:'b',text:'distilasi'},{id:'c',text:'kromatografi'},{id:'d',text:'evaporasi'}], answerId:'b', explanation:'Distilasi memisahkan berdasarkan titik didih.' },
          { id:'ipa-sb-17', text:'Sifat air kapiler disebabkan oleh …', options:[{id:'a',text:'adhesi & kohesi'},{id:'b',text:'warna'},{id:'c',text:'bau'},{id:'d',text:'kepadatan'}], answerId:'a', explanation:'Adhesi & kohesi menyebabkan aksi kapiler.' },
          { id:'ipa-sb-18', text:'Salah satu contoh pemanfaatan magnet adalah …', options:[{id:'a',text:'kompas'},{id:'b',text:'kompor'},{id:'c',text:'baterai'},{id:'d',text:'lemari'}], answerId:'a', explanation:'Kompas memanfaatkan medan magnet untuk arah.' },
          { id:'ipa-sb-19', text:'Bakteri dan jamur termasuk peran penting sebagai …', options:[{id:'a',text:'produsen sekunder'},{id:'b',text:'decomposer'},{id:'c',text:'konsumen primer'},{id:'d',text:'herbivora'}], answerId:'b', explanation:'Decomposer menguraikan bahan organik.' },
          { id:'ipa-sb-20', text:'Suhu kritis suatu zat adalah suhu di mana …', options:[{id:'a',text:'gas menjadi padat'},{id:'b',text:'cair dan gas tak dapat dibedakan'},{id:'c',text:'zat terbakar'},{id:'d',text:'zat meleleh'}], answerId:'b', explanation:'Pada suhu kritis, fase cair & gas tidak dibedakan.' }
        ]
      },
      "Pemrograman": {
        "Mudah": [
          { id:"pr-md-1", text:"Bahasa untuk membuat halaman web sisi klien adalah…", options:[{id:"a",text:"JavaScript"},{id:"b",text:"SQL"},{id:"c",text:"Bash"},{id:"d",text:"CSS saja"}], answerId:"a", explanation:"JavaScript berjalan di browser dan membuat interaksi."},
          { id:"pr-md-2", text:"HTML singkatan dari…", options:[{id:"a",text:"High Text Modern Language"},{id:"b',text:'Hyper Text Markup Language"},{id:"c',text:'Hyperlink Text Making Language"},{id:'d',text:'Hyper Transfer Markup Language"}], answerId:"b", explanation:"HTML = Hyper Text Markup Language."},
          { id:"pr-md-3", text:"Tag penutup HTML ditulis seperti…", options:[{id:"a",text:"<tag>"},{id:"b",text:"</tag>"},{id:"c",text:"{tag}"},{id:"d",text:"[tag]"}], answerId:"b", explanation:"Penutup ditulis </namaTag>."},
          { id:"pr-md-4", text:"Variabel berfungsi untuk…", options:[{id:"a',text:'menyimpan nilai"},{id:'b',text:'menggambar'},{id:'c',text:'mengirim email'},{id:'d',text:'memanggil API'}], answerId:"a", explanation:"Variabel menyimpan nilai/data."},
          { id:'pr-md-5', text:'Komentar satu baris di JavaScript menggunakan…', options:[{id:'a',text:'#'},{id:'b',text:'//'},{id:'c',text:'/*'},{id:'d',text:'<!--'}], answerId:'b', explanation:'// untuk komentar satu baris.'},
          { id:'pr-md-6', text:'CSS berfungsi untuk…', options:[{id:'a',text:'strukur HTML'},{id:'b',text:'gaya/tampilan'},{id:'c',text:'menjalankan logika'},{id:'d',text:'basis data'}], answerId:'b', explanation:'CSS mengatur tampilan/lay out.'},
          { id:'pr-md-7', text:'Browser menafsirkan file HTML, CSS, dan …', options:[{id:'a',text:'Python'},{id:'b',text:'JavaScript'},{id:'c',text:'C++'},{id:'d',text:'SQL'}], answerId:'b', explanation:'JavaScript untuk interaktif di browser.'},
          { id:'pr-md-8', text:'Atribut src pada <img src="..."> menunjukkan…', options:[{id:'a',text:'teks alternatif'},{id:'b',text:'tautan gambar'},{id:'c',text:'judul halaman'},{id:'d',text:'class'}], answerId:'b', explanation:'src = source/URL gambar.'},
          { id:'pr-md-9', text:'Salah satu bahasa pemrograman backend umum adalah…', options:[{id:'a',text:'HTML'},{id:'b',text:'CSS'},{id:'c',text:'Node.js (JavaScript)'},{id:'d',text:'Markdown'}], answerId:'c', explanation:'Node.js/Express sering digunakan di server.'},
          { id:'pr-md-10', text:'Untuk menyimpan data tabel di aplikasi biasanya menggunakan…', options:[{id:'a',text:'database'},{id:'b',text:'CSS'},{id:'c',text:'HTML'},{id:'d',text:'gambar'}], answerId:'a', explanation:'Database menyimpan data terstruktur.'},
          { id:'pr-md-11', text:'Algoritma adalah…', options:[{id:'a',text:'bahasa pemrograman'},{id:'b',text:'langkah-langkah penyelesaian masalah'},{id:'c',text:'tampilan UI'},{id:'d',text:'jenis file'}], answerId:'b', explanation:'Algoritma = urutan langkah menyelesaikan masalah.'},
          { id:'pr-md-12', text:'Loop digunakan untuk…', options:[{id:'a',text:'mengulang aksi'},{id:'b',text:'menghentikan program'},{id:'c',text:'menyimpan file'},{id:'d',text:'mendesain UI'}], answerId:'a', explanation:'Loop mengulangi blok perintah.'},
          { id:'pr-md-13', text:'Array menyimpan…', options:[{id:'a',text:'satu nilai'},{id:'b',text:'beberapa nilai dalam satu variabel'},{id:'c',text:'gambar'},{id:'d',text:'file'}], answerId:'b', explanation:'Array menampung koleksi nilai.'},
          { id:'pr-md-14', text:'Jika ingin menambahkan item ke akhir array di JS, gunakan…', options:[{id:'a',text:'push()'},{id:'b',text:'pop()'},{id:'c',text:'shift()'},{id:'d',text:'unshift()'}], answerId:'a', explanation:'push menambahkan di akhir array.'},
          { id:'pr-md-15', text:'Operator "==" di JS dibandingkan dengan…', options:[{id:'a',text:'sama tipe dan nilai'},{id:'b',text:'sama nilai (setelah konversi)'},{id:'c',text:'selalu false'},{id:'d',text:'menghapus variabel'}], answerId:'b', explanation:'== membandingkan setelah konversi tipe; === membandingkan tipe+nilai.'},
          { id:'pr-md-16', text:'JSON sering dipakai untuk…', options:[{id:'a',text:'menggambar'},{id:'b',text:'pertukaran data'},{id:'c',text:'melihat gambar'},{id:'d',text:'mengedit video'}], answerId:'b', explanation:'JSON format pertukaran data.'},
          { id:'pr-md-17', text:'Tag <a> di HTML digunakan untuk…', options:[{id:'a',text:'membuat gambar'},{id:'b',text:'membuat tautan'},{id:'c',text:'membuat tabel'},{id:'d',text:'menulis teks tebal'}], answerId:'b', explanation:'<a href="..."> untuk link/tautan.'},
          { id:'pr-md-18', text:'Debugging adalah proses…', options:[{id:'a',text:'menambah fitur tanpa tes'},{id:'b',text:'mencari & memperbaiki kesalahan (bug)'},{id:'c',text:'mendesain UI'},{id:'d',text:'menghapus data'}], answerId:'b', explanation:'Debugging mencari & memperbaiki bug.'},
          { id:'pr-md-19', text:'Versi kontrol (Git) berguna untuk…', options:[{id:'a',text:'menyimpan versi kode'},{id:'b',text:'membuat tampilan'},{id:'c',text:'mengompres file'},{id:'d',text:'menulis dokumen' }], answerId:'a', explanation:'Git menyimpan riwayat versi kode.'},
          { id:'pr-md-20', text:'Sebuah fungsi di program berguna untuk…', options:[{id:'a',text:'mengulang perintah'},{id:'b',text:'mendefinisikan sekumpulan perintah'},{id:'c',text:'mencetak halaman'},{id:'d',text:'menutup aplikasi'}], answerId:'b', explanation:'Fungsi mengelompokkan logika jadi reusable.'}
        ],
        "Lumayan Susah": [
          // 20 intermediate programming
          { id:"pr-ls-1", text:"'if' digunakan untuk…", options:[{id:"a",text:"perulangan"},{id:"b",text:"kondisional / pengambilan keputusan"},{id:"c",text:"mendefinisikan variabel"},{id:"d",text:"mengirim email"}], answerId:"b", explanation:"If untuk kondisi dalam program." },
          { id:"pr-ls-2", text:"Algoritma yang memeriksa setiap elemen satu per satu disebut…", options:[{id:"a",text:"binary search"},{id:"b",text:"linear search"},{id:"c',text:'quick sort"},{id:'d',text:'merge sort'}], answerId:"b", explanation:"Linear search memeriksa berurutan ke setiap elemen."},
          { id:"pr-ls-3", text:"Complexity O(n) menunjukkan …", options:[{id:"a',text:'waktu sebanding dengan n^2"},{id:'b',text:'waktu sebanding dengan n'},{id:'c',text:'waktu tetap'},{id:'d',text:'waktu log n'}], answerId:"b", explanation:"O(n) berarti linear terhadap n."},
          { id:"pr-ls-4", text:"Stack mengikuti prinsip …", options:[{id:"a',text:'FIFO'},{id:'b',text:'LIFO'},{id:'c',text:'random'},{id:'d',text:'priority-based'}], answerId:"b", explanation:"Stack = Last In First Out (LIFO)." },
          { id:"pr-ls-5", text:"Queue mengikuti prinsip …", options:[{id:'a',text:'LIFO'},{id:'b',text:'FIFO'},{id:'c',text:'LIFO dengan prioritas'},{id:'d',text:'stack-based'}], answerId:"b", explanation:"Queue = First In First Out (FIFO)." },
          { id:"pr-ls-6", text:"HTTP adalah protokol untuk …", options:[{id:'a',text:'mengirim email'},{id:'b',text:'web (transfer hypertext)'},{id:'c',text:'transfer file FTP'},{id:'d',text:'mengontrol hardware'}], answerId:"b", explanation:"HTTP untuk komunikasi web."},
          { id:"pr-ls-7", text:"REST API biasanya menggunakan format data …", options:[{id:'a',text:'binary'},{id:'b',text:'JSON'},{id:'c',text:'PDF'},{id:'d',text:'image'}], answerId:"b", explanation:"JSON umum dipakai di REST API."},
          { id:"pr-ls-8", text:"Git commit digunakan untuk …", options:[{id:'a',text:'menghapus file'},{id:'b',text:'merekam perubahan kode'},{id:'c',text:'menjalankan server'},{id:'d',text:'mengatur database'}], answerId:"b", explanation:"Commit merekam snapshot perubahan."},
          { id:"pr-ls-9", text:"Function return value berarti …", options:[{id:'a',text:'nilai yang dikembalikan fungsi'},{id:'b',text:'nama fungsi'},{id:'c',text:'tanda komentar'},{id:'d',text:'tipe file'}], answerId:"a", explanation:"Return memberikan output fungsi."},
          { id:"pr-ls-10", text:"Penanganan error (error handling) penting untuk …", options:[{id:'a',text:'membuat program crash'},{id:'b',text:'mengendalikan kondisi tak terduga'},{id:'c',text:'menghapus data'},{id:'d',text:'mengganti bahasa'}], answerId:"b", explanation:"Menangani error mencegah crash & menetapkan fallback."},
          { id:"pr-ls-11", text:"Imutability artinya …", options:[{id:'a',text:'nilai dapat diubah selalu'},{id:'b',text:'nilai tidak berubah setelah dibuat'},{id:'c',text:'fungsi tidak bisa dipanggil'},{id:'d',text:'kode tidak pernah dijalankan'}], answerId:"b", explanation:"Immutability = tidak berubah setelah dibuat."},
          { id:"pr-ls-12", text:"CSS selector '.card' memilih elemen dengan …", options:[{id:'a',text:'tag <card>'},{id:'b',text:'class=\"card\"'},{id:'c',text:'id card'},{id:'d',text:'atribut card'}], answerId:"b", explanation:"Selector .card = elemen dengan class 'card'."},
          { id:"pr-ls-13", text:"Event listener pada JS berguna untuk …", options:[{id:'a',text:'membuat elemen'},{id:'b',text:'mendengarkan aksi user'},{id:'c',text:'menghubungkan database'},{id:'d',text:'menguji kode'}], answerId:"b", explanation:"Event listener merespon aksi user seperti klik."},
          { id:"pr-ls-14", text:"Principle DRY berarti …", options:[{id:'a',text:'Don't Repeat Yourself'},{id:'b',text:'Debug Repeated Yields'},{id:'c',text:'Do Retry Y'},{id:'d',text:'Data Repeat Yes'}], answerId:"a", explanation:"DRY = Don't Repeat Yourself (hindari duplikasi kode)." },
          { id:"pr-ls-15", text:"SQL SELECT digunakan untuk …", options:[{id:'a',text:'menghapus data'},{id:'b',text:'memilih/menampilkan data'},{id:'c',text:'mengupdate server'},{id:'d',text:'mengompres file'}], answerId:"b", explanation:"SELECT menampilkan data dari tabel database."},
          { id:"pr-ls-16", text:"HTTP 404 artinya …", options:[{id:'a',text:'server error'},{id:'b',text:'resource tidak ditemukan'},{id:'c',text:'akses ditolak'},{id:'d',text:'sukses'}], answerId:"b", explanation:"404 = Not Found (resource tidak ditemukan)."},
          { id:"pr-ls-17", text:"Kapan gunakan recursion? …", options:[{id:'a',text:'untuk masalah yang bisa dipecah jadi sub-masalah serupa'},{id:'b',text:'selalu gunakan recursion'},{id:'c',text:'agar lebih cepat'},{id:'d',text:'ketika tidak ada function lain'}], answerId:"a", explanation:"Recursion cocok untuk struktur rekursif seperti pohon."},
          { id:"pr-ls-18", text:"Big O untuk binary search adalah …", options:[{id:'a',text:'O(n)'},{id:'b',text:'O(log n)'},{id:'c',text:'O(n log n)'},{id:'d',text:'O(1)'}], answerId:"b", explanation:"Binary search kompleksitas O(log n)."},
          { id:"pr-ls-19", text:"Gunakan HTTPS ketimbang HTTP karena …", options:[{id:'a',text:'lebih cepat'},{id:'b',text:'lebih aman (enkripsi)'},{id:'c',text:'lebih murah'},{id:'d',text:'lebih sederhana'}], answerId:"b", explanation:"HTTPS mengenkripsi komunikasi agar aman."},
          { id:"pr-ls-20", text:"Dependency injection membantu …", options:[{id:'a',text:'memperketat coupling'},{id:'b',text:'melonggarkan coupling & mempermudah testing'},{id:'c',text:'membuat UI'},{id:'d',text:'mengubah database'}], answerId:"b", explanation:"DI mempermudah pengujian & modularitas."}
        ],
        "Susah Banget": [
          // 20 advanced programming
          { id:"pr-sb-1", text:"Complexity O(n^2) biasanya terjadi pada …", options:[{id:'a',text:'bubble sort'},{id:'b',text:'binary search'},{id:'c',text:'hash lookup'},{id:'d',text:'merge sort'}], answerId:"a", explanation:"Bubble sort biasa O(n^2)." },
          { id:"pr-sb-2", text:"Hash table biasanya memiliki waktu average lookup …", options:[{id:'a',text:'O(1)'},{id:'b',text:'O(n)'},{id:'c',text:'O(log n)'},{id:'d',text:'O(n^2)'}], answerId:"a", explanation:"Hash table average lookup O(1)." },
          { id:"pr-sb-3", text:"Deadlock terjadi ketika …", options:[{id:'a',text:'sempit ruang memori'},{id:'b',text:'dua proses saling menunggu resource yang dipegang satu sama lain'},{id:'c',text:'program berjalan normal'},{id:'d',text:'tidak ada thread'}], answerId:"b", explanation:"Deadlock = saling menunggu resource." },
          { id:"pr-sb-4", text:"CAP theorem menyatakan pada distributed system, kita tidak bisa memiliki ketiga aspek berikut secara bersamaan: …", options:[{id:'a',text:'Consistency Availability Partition-tolerance'},{id:'b',text:'Cache Access Performance'},{id:'c',text:'Compute Accuracy Precision'},{id:'d',text:'Concurrency Asynchrony Parallelism'}], answerId:"a", explanation:"CAP = Consistency, Availability, Partition tolerance."},
          { id:"pr-sb-5", text:"Immutable object membantu …", options:[{id:'a',text:'mengurangi bug terkait state'},{id:'b',text:'membuat kode lebih lambat selamanya'},{id:'c',text:'menghapus fungsi'},{id:'d',text:'mengganti DB'}], answerId:"a", explanation:"Immutability mengurangi bug perubahan state tak terduga."},
          { id:"pr-sb-6", text:"Polymorphism di OOP memungkinkan …", options:[{id:'a',text:'objek memiliki banyak bentuk/tipe'},{id:'b',text:'menggandakan memory'},{id:'c',text:'menghapus class'},{id:'d',text:'menjalankan program lebih cepat'}], answerId:"a", explanation:"Polymorphism = objek berbeda merespon method sama secara berbeda."},
          { id:"pr-sb-7", text:"ACID pada transaksi DB berarti …", options:[{id:'a',text:'Atomicity Consistency Isolation Durability'},{id:'b',text:'All Consistent In Data'},{id:'c',text:'Auto Commit Insert Delete'},{id:'d',text:'None'}], answerId:"a", explanation:"ACID = sifat transaksi yang andal."},
          { id:"pr-sb-8", text:"Memoization adalah teknik …", options:[{id:'a',text:'membagi-menguji'},{id:'b',text:'menyimpan hasil fungsi untuk menghindari perhitungan ulang'},{id:'c',text:'menguji performa'},{id:'d',text:'mengurangi ukuran file'}], answerId:"b", explanation:"Memoization cache hasil untuk optimisasi."},
          { id:"pr-sb-9", text:"Concurrency berbeda dari parallelism, concurrency artinya …", options:[{id:'a',text:'bekerja serentak di banyak CPU'},{id:'b',text:'menyusun tugas agar tampak berjalan bersamaan'},{id:'c',text:'satu thread selalu aktif'},{id:'d',text:'semua task idle'}], answerId:"b", explanation:"Concurrency = handle multiple tasks at overlapping time frames."},
          { id:"pr-sb-10', text:'Design pattern 'Singleton' berguna untuk …', options:[{id:'a',text:'menciptakan banyak instance'},{id:'b',text:'menjamin satu instance global'},{id:'c',text:'menghapus semua instance'},{id:'d',text:'mengatur UI'}], answerId:'b', explanation:'Singleton membatasi adanya satu instance kelas.'},
          { id:'pr-sb-11', text:'CI/CD artinya …', options:[{id:'a',text:'Continuous Integration / Continuous Deployment'},{id:'b',text:'Code Integration / Code Delivery'},{id:'c',text:'Continuous Input'},{id:'d',text:'Clean Implementation'}], answerId:'a', explanation:'CI/CD otomatisasi build & deploy.'},
          { id:'pr-sb-12', text:'Idempotent request artinya …', options:[{id:'a',text:'respon selalu berbeda'},{id:'b',text:'efek samping berulang tetap sama'},{id:'c',text:'tidak boleh diulang'},{id:'d',text:'mempercepat server'}], answerId:'b', explanation:'Idempotent = melakukan request berkali tetap hasil sama.'},
          { id:'pr-sb-13', text:'Kapan gunakan NoSQL daripada RDBMS? …', options:[{id:'a',text:'data terstruktur kuat & relasional'},{id:'b',text:'skema fleksibel & skala horizontal'},{id:'c',text:'transaksi kompleks ACID'},{id:'d',text:'kueri SQL intensif'}], answerId:'b', explanation:'NoSQL cocok skema fleksibel & skala besar.'},
          { id:'pr-sb-14', text:'Latency di jaringan merujuk pada …', options:[{id:'a',text:'kapasitas'},{id:'b',text:'keterlambatan/penundaan'},{id:'c',text:'bandwidth'},{id:'d',text:'enkripsi'}], answerId:'b', explanation:'Latency = delay waktu pengiriman data.'},
          { id:'pr-sb-15', text:'Load balancer berguna untuk …', options:[{id:'a',text:'mengumpulkan log'},{id:'b',text:'mendistribusikan traffic ke beberapa server'},{id:'c',text:'menyimpan DB'},{id:'d',text:'mempercepat local storage'}], answerId:'b', explanation:'Load balancer membagi beban ke server.'},
          { id:'pr-sb-16', text:'OAuth biasanya digunakan untuk …', options:[{id:'a',text:'autorisasi akses pihak ketiga tanpa kirim password'},{id:'b',text:'mengganti UI'},{id:'c',text:'menyimpan image'},{id:'d',text:'menghapus user'}], answerId:'a', explanation:'OAuth otorisasi akses aman tanpa berbagi password.'},
          { id:'pr-sb-17', text:'Containerization (Docker) memudahkan …', options:[{id:'a',text:'membungkus aplikasi beserta dependensi'},{id:'b',text:'mengganti CPU'},{id:'c',text:'menambah bug'},{id:'d',text:'menghapus versi kontrol'}], answerId:'a', explanation:'Docker isolate aplikasi & dependensinya di container.'},
          { id:'pr-sb-18', text:'Event loop di JS bertanggung jawab untuk …', options:[{id:'a',text:'menjalankan semua tugas sinkron saja'},{id:'b',text:'mengelola callback/asynchronous tasks'},{id:'c',text:'memanggil API'},{id:'d',text:'mengubah DOM'}], answerId:'b', explanation:'Event loop memproses task queue & microtask queue.'},
          { id:'pr-sb-19', text:'Kunci utama keamanan aplikasi web termasuk …', options:[{id:'a',text:'validasi input'},{id:'b',text:'menerima semua input'},{id:'c',text:'menyimpan password plain text'},{id:'d',text:'memakai HTTP saja'}], answerId:'a', explanation:'Validasi input & hashing password penting untuk keamanan.'},
          { id:'pr-sb-20', text:'Sharding database berguna untuk …', options:[{id:'a',text:'menggabungkan tabel'},{id:'b',text:'mendistribusikan data ke beberapa node untuk skala'},{id:'c',text:'mengunci DB'},{id:'d',text:'menghapus duplikasi'}], answerId:'b', explanation:'Sharding membagi data ke node untuk skalabilitas.'}
        ]
      }
    };

    // ---------- State ----------
    let mode = "Siswa"; // "Siswa" or "Guru"
    let loggedIn = false; // guru login state (client-side)
    let lastStarts = {}; // key "category||level" => firstQuestionId (to ensure different start)
    let currentQuestions = [];
    let currentIndex = 0;
    let score = 0;
    let lastSetCategory = null;
    let lastSetLevel = null;

    // ---------- DOM ----------
    const el = {
      category: document.getElementById("category"),
      level: document.getElementById("level"),
      btnStart: document.getElementById("btn-start"),
      btnRandom: document.getElementById("btn-random"),
      modeIndicator: document.getElementById("mode-indicator"),
      btnLogin: document.getElementById("btn-login"),
      adminPanel: document.getElementById("admin-panel"),
      btnShowAdmin: document.getElementById("btn-show-admin"),
      adminCat: document.getElementById("admin-cat"),
      adminLevel: document.getElementById("admin-level"),
      qText: document.getElementById("q-text"),
      qA: document.getElementById("q-a"),
      qB: document.getElementById("q-b"),
      qC: document.getElementById("q-c"),
      qD: document.getElementById("q-d"),
      qAns: document.getElementById("q-ans"),
      qExp: document.getElementById("q-exp"),
      btnAddQ: document.getElementById("btn-add-q"),
      csvFile: document.getElementById("csv-file"),
      btnImport: document.getElementById("btn-import"),
      btnLogout: document.getElementById("btn-logout"),
      home: document.getElementById("home"),
      quiz: document.getElementById("quiz"),
      result: document.getElementById("result"),
      meta: document.getElementById("meta"),
      progressText: document.getElementById("progressText"),
      scoreEl: document.getElementById("score"),
      totalQuestions: document.getElementById("totalQuestions"),
      pfill: document.getElementById("pfill"),
      questionText: document.getElementById("questionText"),
      options: document.getElementById("options"),
      explain: document.getElementById("explain"),
      explainTitle: document.getElementById("explainTitle"),
      explainText: document.getElementById("explainText"),
      btnNext: document.getElementById("btn-next"),
      btnRetry: document.getElementById("btn-retry"),
      btnHome: document.getElementById("btn-home"),
      resultText: document.getElementById("resultText"),
      btnResRetry: document.getElementById("btn-res-retry"),
      btnResHome: document.getElementById("btn-res-home")
    };

    // ---------- Helpers ----------
    function rebuildCategorySelect() {
      el.category.innerHTML = "";
      const cats = Object.keys(QUESTION_BANK);
      cats.forEach(cat => {
        const o = document.createElement("option");
        o.value = cat;
        o.textContent = cat;
        el.category.appendChild(o);
      });
      // keep selectedCategory if exists or set to first
      if (!el.category.value || !QUESTION_BANK[el.category.value]) {
        el.category.value = Object.keys(QUESTION_BANK)[0];
      }
      updateLevelSelect();
    }

    function updateLevelSelect() {
      const cat = el.category.value;
      el.level.innerHTML = "";
      const levels = Object.keys(QUESTION_BANK[cat] || {});
      // Ensure our standard LEVELS order appears; if category has those, order them
      LEVELS.forEach(L => {
        if (levels.includes(L)) {
          const o = document.createElement("option"); o.value = L; o.textContent = L; el.level.appendChild(o);
        }
      });
      // Add any other levels (if any)
      levels.forEach(L => {
        if (!LEVELS.includes(L)) {
          const o = document.createElement("option"); o.value = L; o.textContent = L; el.level.appendChild(o);
        }
      });
    }

    function shuffleArray(arr) {
      const a = arr.slice();
      for (let i = a.length -1; i>0; i--) {
        const j = Math.floor(Math.random()*(i+1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function rotateArray(arr,k=1) {
      const a = arr.slice(); const n=a.length; if(n===0) return a; k=((k%n)+n)%n; return a.slice(k).concat(a.slice(0,k));
    }

    // ---------- Mode / Auth ----------
    function setMode(newMode) {
      mode = newMode;
      el.modeIndicator.textContent = `Mode: ${mode}`;
      if (mode === "Guru" && loggedIn) {
        el.adminPanel.style.display = "block";
        el.btnShowAdmin.style.display = "inline-flex";
        el.btnLogin.textContent = "Mode Siswa";
      } else {
        el.adminPanel.style.display = "none";
        el.btnShowAdmin.style.display = "none";
        el.btnLogin.textContent = loggedIn ? "Logout Guru" : "Login Guru";
      }
    }

    function promptLogin() {
      if (loggedIn) {
        // Logout
        loggedIn = false;
        setMode("Siswa");
        el.btnLogin.textContent = "Login Guru";
        alert("Anda telah logout sebagai Guru.");
        return;
      }
      const pw = prompt("Masukkan password Guru:");
      // client-side static password
      if (pw === "guru123") {
        loggedIn = true;
        setMode("Guru");
        el.btnLogin.textContent = "Logout Guru";
        el.modeIndicator.textContent = "Mode: Guru";
        el.adminPanel.style.display = "block";
        el.btnShowAdmin.style.display = "inline-flex";
        alert("Login berhasil. Anda sekarang di Mode Guru.");
      } else if (pw === null) {
        // user cancelled
      } else {
        alert("Password salah.");
      }
    }

    // ---------- Quiz flow ----------
    function startQuiz(categoryOverride, levelOverride) {
      const cat = categoryOverride || el.category.value;
      const lvl = levelOverride || el.level.value;
      const bank = (QUESTION_BANK[cat] && QUESTION_BANK[cat][lvl]) || [];
      if (!bank.length) { alert("Belum ada soal di kategori/level ini."); return; }

      // shuffle and ensure first question different than lastStarts
      let shuffled = shuffleArray(bank);
      const key = `${cat}||${lvl}`;
      const prevFirst = lastStarts[key];
      if (prevFirst && shuffled[0].id === prevFirst && shuffled.length > 1) {
        const k = Math.max(1, Math.floor(Math.random()*shuffled.length));
        shuffled = rotateArray(shuffled,k);
      }
      lastStarts[key] = shuffled[0].id;

      currentQuestions = shuffled;
      currentIndex = 0;
      score = 0;
      lastSetCategory = cat;
      lastSetLevel = lvl;

      // show quiz UI
      el.home.style.display = "none";
      el.result.style.display = "none";
      el.quiz.style.display = "block";
      renderQuestion();
    }

    function renderQuestion() {
      const q = currentQuestions[currentIndex];
      if (!q) return;
      el.meta.textContent = `${lastSetCategory} • ${lastSetLevel}`;
      el.progressText.textContent = `Soal ${currentIndex+1} / ${currentQuestions.length}`;
      el.scoreEl.textContent = score;
      el.totalQuestions.textContent = `${currentQuestions.length} soal`;
      const ratio = (currentIndex+1)/currentQuestions.length;
      el.pfill.style.width = `${(ratio*100).toFixed(1)}%`;

      el.questionText.textContent = q.text;
      el.options.innerHTML = "";
      el.explain.style.display = "none";
      el.btnRetry.style.display = "none";

      q.options.forEach(opt => {
        const b = document.createElement("button");
        b.className = "option";
        b.textContent = opt.text;
        b.dataset.opt = opt.id;
        b.addEventListener("click", () => chooseAnswer(opt.id));
        el.options.appendChild(b);
      });
      // scroll to top of quiz in mobile
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    function setOptionsDisabled(disabled) {
      const btns = el.options.querySelectorAll(".option");
      btns.forEach(b => { if (disabled) b.classList.add("disabled"); else b.classList.remove("disabled"); });
    }

    function chooseAnswer(optId) {
      const q = currentQuestions[currentIndex];
      if (!q) return;
      if (el.explain.style.display !== "none") return; // already answered
      const correct = optId === q.answerId;
      if (correct) score++;

      // mark options
      const btns = el.options.querySelectorAll(".option");
      btns.forEach(b => {
        const id = b.dataset.opt;
        if (id === q.answerId) b.classList.add("correct");
        if (!correct && id === optId && id !== q.answerId) b.classList.add("wrong");
      });

      setOptionsDisabled(true);
      el.explainTitle.textContent = correct ? "Benar! 🎉" : "Salah 😔";
      el.explainText.textContent = q.explanation || "";
      el.explain.style.display = "block";
      el.scoreEl.textContent = score;

      if (!correct) el.btnRetry.style.display = "inline-flex";
      else el.btnRetry.style.display = "none";

      el.btnNext.textContent = (currentIndex+1 < currentQuestions.length) ? "Soal berikutnya" : "Lihat hasil";
    }

    function nextQuestion() {
      el.explain.style.display = "none";
      setOptionsDisabled(false);
      if (currentIndex + 1 < currentQuestions.length) {
        currentIndex++;
        renderQuestion();
      } else {
        // show result
        el.result.style.display = "block";
        el.quiz.style.display = "none";
        el.resultText.textContent = `Skor kamu: ${score} / ${currentQuestions.length}`;
      }
    }

    function retryLevel() {
      // restart same level but ensure different starting question (handled in startQuiz)
      if (lastSetCategory && lastSetLevel) startQuiz(lastSetCategory, lastSetLevel);
    }

    function backToHome() {
      el.quiz.style.display = "none";
      el.result.style.display = "none";
      el.home.style.display = "block";
      // ensure admin panel visibility matches mode
      if (mode === "Guru" && loggedIn) el.adminPanel.style.display = "block";
      else el.adminPanel.style.display = "none";
    }

    // ---------- Admin actions (Guru) ----------
    function addQuestionManual() {
      if (!loggedIn) { alert("Fitur ini untuk Guru (login)."); return; }
      const cat = (el.adminCat.value || "").trim();
      const lvl = (el.adminLevel.value || "").trim();
      const text = (el.qText.value || "").trim();
      const a = (el.qA.value || "").trim();
      const b = (el.qB.value || "").trim();
      const c = (el.qC.value || "").trim();
      const d = (el.qD.value || "").trim();
      const ans = (el.qAns.value || "").trim().toLowerCase();
      const exp = (el.qExp.value || "").trim();

      if (!cat || !lvl || !text || !a || !b || !c || !d || !["a","b","c","d"].includes(ans)) {
        alert("Lengkapi semua field dan masukkan jawaban benar (a/b/c/d).");
        return;
      }

      if (!QUESTION_BANK[cat]) QUESTION_BANK[cat] = {};
      if (!QUESTION_BANK[cat][lvl]) QUESTION_BANK[cat][lvl] = [];

      const id = `${cat.slice(0,3).toLowerCase()}-${lvl.slice(0,2).toLowerCase()}-${Date.now()}`;
      QUESTION_BANK[cat][lvl].push({
        id, text,
        options: [{id:"a",text:a},{id:"b",text:b},{id:"c",text:c},{id:"d",text:d}],
        answerId: ans, explanation: exp
      });

      rebuildCategorySelect();
      el.adminCat.value = ""; el.adminLevel.value = ""; el.qText.value=""; el.qA.value=""; el.qB.value=""; el.qC.value=""; el.qD.value=""; el.qAns.value=""; el.qExp.value="";
      alert("Soal berhasil ditambahkan ke bank soal.");
    }

    // CSV parse simple
    function parseCsv(text) {
      // split lines, remove empty; accept comma or semicolon
      const lines = text.split(/\r?\n/).map(l=>l.trim()).filter(l=>l.length>0);
      if (lines.length <= 1) return [];
      const header = lines[0];
      const sep = header.includes(";") ? ";" : ",";
      const rows = [];
      for (let i=1;i<lines.length;i++){
        const parts = lines[i].split(sep).map(p=>p.trim());
        if (parts.length >= 7) {
          rows.push(parts);
        }
      }
      return rows;
    }

    function importCsv() {
      if (!loggedIn) { alert("Impor hanya untuk Guru (login)."); return; }
      const file = el.csvFile.files[0];
      const cat = (el.adminCat.value || "").trim();
      const lvl = (el.adminLevel.value || "").trim();
      if (!file) { alert("Pilih file CSV."); return; }
      if (!cat || !lvl) { alert("Isi nama mata pelajaran & level tujuan."); return; }

      const reader = new FileReader();
      reader.onload = function(e) {
        const text = e.target.result;
        const rows = parseCsv(text);
        if (rows.length === 0) { alert("CSV tidak berisi baris soal sesuai format."); return; }

        const qs = rows.map((parts, i) => {
          const [qText, a, b, c, d, ansRaw, exp] = parts;
          const ans = (ansRaw || "a").trim().toLowerCase();
          return {
            id: `${cat.slice(0,3).toLowerCase()}-${lvl.slice(0,2).toLowerCase()}-${Date.now()}-${i}`,
            text: qText.trim(),
            options: [{id:"a",text:(a||"").trim()},{id:"b",text:(b||"").trim()},{id:"c",text:(c||"").trim()},{id:"d",text:(d||"").trim()}],
            answerId: ["a","b","c","d"].includes(ans) ? ans : "a",
            explanation: (exp||"").trim()
          };
        });

        // replace bank for this category & level
        if (!QUESTION_BANK[cat]) QUESTION_BANK[cat] = {};
        QUESTION_BANK[cat][lvl] = qs;
        rebuildCategorySelect();
        el.adminCat.value = ""; el.adminLevel.value = ""; el.csvFile.value = "";
        alert(`Berhasil mengimpor ${qs.length} soal ke ${cat} - ${lvl}`);
      };
      reader.readAsText(file);
    }

    // ---------- Events ----------
    // init
    rebuildCategorySelect();
    setMode("Siswa");

    // category change
    el.category.addEventListener("change", () => updateLevelSelect());

    el.btnStart.addEventListener("click", () => {
      startQuiz();
    });

    el.btnRandom.addEventListener("click", () => {
      const cats = Object.keys(QUESTION_BANK);
      const randCat = cats[Math.floor(Math.random()*cats.length)];
      const levels = Object.keys(QUESTION_BANK[randCat]);
      // prefer our LEVELS order
      const level = LEVELS.find(L=>levels.includes(L)) || levels[0];
      el.category.value = randCat;
      updateLevelSelect();
      el.level.value = level;
      startQuiz(randCat, level);
    });

    el.btnLogin.addEventListener("click", () => {
      if (!loggedIn) promptLogin();
      else {
        // logout
        loggedIn = false;
        setMode("Siswa");
        el.btnLogin.textContent = "Login Guru";
      }
    });

    // show admin toggle (only visible when logged in)
    el.btnShowAdmin.addEventListener("click", () => {
      if (el.adminPanel.style.display === "block") el.adminPanel.style.display = "none";
      else el.adminPanel.style.display = "block";
    });

    el.btnAddQ.addEventListener("click", addQuestionManual);
    el.btnImport.addEventListener("click", importCsv);
    el.btnLogout.addEventListener("click", () => { loggedIn=false; setMode("Siswa"); el.btnLogin.textContent="Login Guru"; });

    el.btnNext.addEventListener("click", nextQuestion);
    el.btnRetry.addEventListener("click", retryLevel);
    el.btnHome.addEventListener("click", backToHome);

    el.btnResRetry.addEventListener("click", retryLevel);
    el.btnResHome.addEventListener("click", backToHome);

    // show admin panel button only if loggedIn (reactive)
    // We'll toggle visibility after login
    const observer = new MutationObserver(() => {
      // keep mode indicator in sync
      if (loggedIn) {
        el.btnShowAdmin.style.display = "inline-flex";
      } else {
        el.btnShowAdmin.style.display = "none";
      }
    });
    observer.observe(document.body, { attributes: true, childList: true, subtree: true });

    // Make sure initial selects reflect bank
    rebuildCategorySelect();

    // Ensure admin button visibility initially hidden
    el.btnShowAdmin.style.display = "none";

    // Quick hint: if teacher logs in, setMode showing admin panel
    // We adjust setMode display already when logging in.

    // End
  </script>
</body>
</html>
